<!--
doc/src/sgml/ref/pg_dumpall.sgml
PostgreSQL documentation
-->

<refentry id="app-pg-dumpall">
<!-- pgdoc-cn_start sig_en=9c4baa383fa05907fbfc0f4e8f88d74b sig_cn_org=None source=14.1 
 <indexterm zone="app-pg-dumpall">
  <primary>pg_dumpall</primary>
 </indexterm>
________________________________________________________-->
 <indexterm zone="app-pg-dumpall">
  <primary>pg_dumpall</primary>
 </indexterm>
<!-- pgdoc-cn_end sig_en=9c4baa383fa05907fbfc0f4e8f88d74b -->

 <refmeta>
  <refentrytitle><application>pg_dumpall</application></refentrytitle>
  <manvolnum>1</manvolnum>
  <refmiscinfo>Application</refmiscinfo>
 </refmeta>

<!-- pgdoc-cn_start sig_en=ad279bbac28d8b695fff88a66102beba sig_cn_org=None source=14.1 
 <refnamediv>
  <refname>pg_dumpall</refname>
  <refpurpose>extract a <productname>PostgreSQL</productname> database cluster into a script file</refpurpose>
 </refnamediv>
________________________________________________________-->
 <refnamediv>
  <refname>pg_dumpall</refname>
  <refpurpose>将一个<productname>PostgreSQL</productname>数据库集簇抽取到一个脚本文件中</refpurpose>
 </refnamediv>
<!-- pgdoc-cn_end sig_en=ad279bbac28d8b695fff88a66102beba -->

 <refsynopsisdiv>
  <cmdsynopsis>
   <command>pg_dumpall</command>
   <arg rep="repeat"><replaceable>connection-option</replaceable></arg>
   <arg rep="repeat"><replaceable>option</replaceable></arg>
  </cmdsynopsis>
 </refsynopsisdiv>

 <refsect1 id="app-pg-dumpall-description">
<!-- pgdoc-cn_start sig_en=59d6e86f3a60db4f1e08d0d6e639924e sig_cn_org=None source=14.1 
  <title>Description</title>
________________________________________________________-->
  <title>描述</title>
<!-- pgdoc-cn_end sig_en=59d6e86f3a60db4f1e08d0d6e639924e -->

<!-- pgdoc-cn_start sig_en=093915ebaa96ffd2af5565e232cdf2a4 sig_cn_org=c2ab2f37a6cfff7bef36a0a6bb7960bc source=15.7 
  <para>
   <application>pg_dumpall</application> is a utility for writing out
   (<quote>dumping</quote>) all <productname>PostgreSQL</productname> databases
   of a cluster into one script file.  The script file contains
   <acronym>SQL</acronym> commands that can be used as input to <xref
   linkend="app-psql"/> to restore the databases.  It does this by
   calling <xref linkend="app-pgdump"/> for each database in the cluster.
   <application>pg_dumpall</application> also dumps global objects
   that are common to all databases, namely database roles, tablespaces,
   and privilege grants for configuration parameters.
   (<application>pg_dump</application> does not save these objects.)
  </para>
________________________________________________________-->
  <para>
   <application>pg_dumpall</application>是一个用于将集群中所有<productname>PostgreSQL</productname>数据库
   写入（<quote>dumping</quote>）到一个脚本文件的实用程序。脚本文件包含
   可以作为输入传递给<xref linkend="app-psql"/>以恢复数据库的<acronym>SQL</acronym>命令。
   它通过为集群中的每个数据库调用<xref linkend="app-pgdump"/>来实现这一点。
   <application>pg_dumpall</application>还会转储对所有数据库通用的全局对象，
   即数据库角色、表空间和配置参数的权限授予。
   （<application>pg_dump</application>不保存这些对象。）
</para>
<!-- pgdoc-cn_end sig_en=093915ebaa96ffd2af5565e232cdf2a4 -->

<!-- pgdoc-cn_start sig_en=cd9ae5932717def41b4c5a38e0f89f43 sig_cn_org=None source=14.1 
  <para>
   Since <application>pg_dumpall</application> reads tables from all
   databases you will most likely have to connect as a database
   superuser in order to produce a complete dump.  Also you will need
   superuser privileges to execute the saved script in order to be
   allowed to add roles and create databases.
  </para>
________________________________________________________-->
  <para>
   因为<application>pg_dumpall</application>从所有数据库中读取表，所以你很可能需要以一个数据库超级用户的身份连接以便生成完整的转储。同样，你也需要超级用户特权执行保存下来的脚本，这样才能增加角色和组以及创建数据库。
  </para>
<!-- pgdoc-cn_end sig_en=cd9ae5932717def41b4c5a38e0f89f43 -->

<!-- pgdoc-cn_start sig_en=179e657b6aa67df5641ca6deb8848def sig_cn_org=None source=14.1 
  <para>
   The SQL script will be written to the standard output.  Use the
   <option>-f</option>/<option>-&minus;file</option> option or shell operators to
   redirect it into a file.
  </para>
________________________________________________________-->
  <para>
   SQL 脚本将被写出到标准输出。使用 <option>-f</option>/<option>--file</option> 选项或者 shell 操作符可以把它重定向到一个文件。
  </para>
<!-- pgdoc-cn_end sig_en=179e657b6aa67df5641ca6deb8848def -->

<!-- pgdoc-cn_start sig_en=1ad1c567e8cbcd5d4d22895e42bdb0ce sig_cn_org=None source=14.1 
  <para>
  <application>pg_dumpall</application> needs to connect several
  times to the <productname>PostgreSQL</productname> server (once per
  database).  If you use password authentication it will ask for
  a password each time. It is convenient to have a
  <filename>~/.pgpass</filename> file in such cases. See <xref
  linkend="libpq-pgpass"/> for more information.
  </para>
________________________________________________________-->
  <para>
  <application>pg_dumpall</application>需要多次连接到<productname>PostgreSQL</productname>服务器（每个数据库一次）。如果你使用口令认证，可能每次都会要求口令。这种情况下使用一个<filename>~/.pgpass</filename>会比较方便。详见<xref linkend="libpq-pgpass"/>。
  </para>
<!-- pgdoc-cn_end sig_en=1ad1c567e8cbcd5d4d22895e42bdb0ce -->

 </refsect1>

 <refsect1>
<!-- pgdoc-cn_start sig_en=ee3f399228d18d2103d5b7f4e0aeeba8 sig_cn_org=None source=14.1 
  <title>Options</title>
________________________________________________________-->
  <title>选项</title>
<!-- pgdoc-cn_end sig_en=ee3f399228d18d2103d5b7f4e0aeeba8 -->

<!-- pgdoc-cn_start sig_en=b46725c8268fecd7070d13fc0751bb72 sig_cn_org=a3cfbcf31ecdf110f6f217e2663f90b3 source=15.7 
   <para>
    The following command-line options control the content and
    format of the output.

    <variablelist>
     <varlistentry>
________________________________________________________-->
   <para>
    以下命令行选项控制输出的内容和格式。

    <variablelist>
     <varlistentry>
<!-- pgdoc-cn_end sig_en=b46725c8268fecd7070d13fc0751bb72 -->
      <term><option>-a</option></term>
      <term><option>--data-only</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=34e40106a8c911e4ae54640d1681ec49 sig_cn_org=dc98dd1456ca4c1e4aea937df2ea42fa source=15.7 
       <para>
        Dump only the data, not the schema (data definitions).
       </para>
________________________________________________________-->
       <para>
        仅转储数据，而不是模式（数据定义）。
       </para>
<!-- pgdoc-cn_end sig_en=34e40106a8c911e4ae54640d1681ec49 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-c</option></term>
      <term><option>--clean</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=6280ecd53923d7210dc73316e2ec4a60 sig_cn_org=8f5c7d0161a38e7ce9b39c1a06fe3505 source=15.7 
       <para>
        Emit SQL commands to <command>DROP</command> all the dumped
        databases, roles, and tablespaces before recreating them.
        This option is useful when the restore is to overwrite an existing
        cluster.  If any of the objects do not exist in the destination
        cluster, ignorable error messages will be reported during
        restore, unless <option>-&minus;if-exists</option> is also specified.
       </para>
________________________________________________________-->
       <para>
        发出SQL命令以在重新创建它们之前<command>DROP</command>所有已转储的数据库、角色和表空间。
        当恢复是为了覆盖现有集群时，此选项很有用。
        如果目标集群中不存在任何对象，则在恢复过程中将报告可忽略的错误消息，除非还指定了<option>--if-exists</option>。
       </para>
<!-- pgdoc-cn_end sig_en=6280ecd53923d7210dc73316e2ec4a60 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-E <replaceable class="parameter">encoding</replaceable></option></term>
      <term><option>--encoding=<replaceable class="parameter">encoding</replaceable></option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=d052118e22f5a936eae00d789c5ad035 sig_cn_org=2fce7183efd823efb76e70b80cdda47d source=15.7 
       <para>
        Create the dump in the specified character set encoding. By default,
        the dump is created in the database encoding.  (Another way to get the
        same result is to set the <envar>PGCLIENTENCODING</envar> environment
        variable to the desired dump encoding.)
       </para>
________________________________________________________-->
       <para>
        在指定的字符集编码中创建转储。默认情况下，转储将以数据库编码创建。
        （获得相同结果的另一种方法是将<envar>PGCLIENTENCODING</envar>环境变量设置为所需的转储编码。）
       </para>
<!-- pgdoc-cn_end sig_en=d052118e22f5a936eae00d789c5ad035 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-f <replaceable class="parameter">filename</replaceable></option></term>
      <term><option>--file=<replaceable class="parameter">filename</replaceable></option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=295b38a79ae2fa69d020768c6edb6d2a sig_cn_org=3b33253ec4ce91e5e50808a8f8a730f7 source=15.7 
       <para>
        Send output to the specified file.  If this is omitted, the
        standard output is used.
       </para>
________________________________________________________-->
       <para>
        将输出发送到指定的文件。如果省略此选项，则使用标准输出。
       </para>
<!-- pgdoc-cn_end sig_en=295b38a79ae2fa69d020768c6edb6d2a -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-g</option></term>
      <term><option>--globals-only</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=0f77470594d098f154656fa915bb4df5 sig_cn_org=303fc1587222502e25798b439200dcc3 source=15.7 
       <para>
        Dump only global objects (roles and tablespaces), no databases.
       </para>
________________________________________________________-->
       <para>
        仅转储全局对象（角色和表空间），不包括数据库。
       </para>
<!-- pgdoc-cn_end sig_en=0f77470594d098f154656fa915bb4df5 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-O</option></term>
      <term><option>--no-owner</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=c0dc40970257c7bf24fe572b9ca85b3f sig_cn_org=e7b9d7994442c153ef7b7b2d7251a16d source=15.7 
       <para>
        Do not output commands to set
        ownership of objects to match the original database.
        By default, <application>pg_dumpall</application> issues
        <command>ALTER OWNER</command> or
        <command>SET SESSION AUTHORIZATION</command>
        statements to set ownership of created schema elements.
        These statements
        will fail when the script is run unless it is started by a superuser
        (or the same user that owns all of the objects in the script).
        To make a script that can be restored by any user, but will give
        that user ownership of all the objects, specify <option>-O</option>.
       </para>
________________________________________________________-->
       <para>
        不要输出命令来设置对象的所有权以匹配原始数据库。
        默认情况下，<application>pg_dumpall</application>会发出
        <command>ALTER OWNER</command>或
        <command>SET SESSION AUTHORIZATION</command>语句来设置创建的模式元素的所有权。
        当运行脚本时，这些语句将失败，除非由超级用户启动
        （或拥有脚本中所有对象的相同用户）。
        要创建一个可以被任何用户恢复的脚本，但会将
        所有对象的所有权交给该用户，请指定<option>-O</option>。
       </para>
<!-- pgdoc-cn_end sig_en=c0dc40970257c7bf24fe572b9ca85b3f -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-r</option></term>
      <term><option>--roles-only</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=46c3a4e622fc28b4976e9c7ec5bd54c9 sig_cn_org=224189f24ac4f5e98097bb6cc1910982 source=15.7 
       <para>
        Dump only roles, no databases or tablespaces.
       </para>
________________________________________________________-->
       <para>
        仅转储角色，不包括数据库或表空间。
       </para>
<!-- pgdoc-cn_end sig_en=46c3a4e622fc28b4976e9c7ec5bd54c9 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-s</option></term>
      <term><option>--schema-only</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=de40581fa5cf63379e575cb94b658558 sig_cn_org=7b893f1de4e341b031f6080144bea0da source=15.7 
       <para>
        Dump only the object definitions (schema), not data.
       </para>
________________________________________________________-->
       <para>
        仅转储对象定义（模式），不包括数据。
       </para>
<!-- pgdoc-cn_end sig_en=de40581fa5cf63379e575cb94b658558 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-S <replaceable class="parameter">username</replaceable></option></term>
      <term><option>--superuser=<replaceable class="parameter">username</replaceable></option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=d63260f72a73cc045037ca35a2ea863d sig_cn_org=05e717e789d45918b788d34c890addc5 source=15.7 
       <para>
        Specify the superuser user name to use when disabling triggers.
        This is relevant only if <option>-&minus;disable-triggers</option> is used.
        (Usually, it's better to leave this out, and instead start the
        resulting script as superuser.)
       </para>
________________________________________________________-->
       <para>
        指定在禁用触发器时要使用的超级用户用户名。
        这仅在使用<option>--disable-triggers</option>时才相关。
        （通常，最好将其省略，而是以超级用户身份启动生成的脚本。）
       </para>
<!-- pgdoc-cn_end sig_en=d63260f72a73cc045037ca35a2ea863d -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-t</option></term>
      <term><option>--tablespaces-only</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=05e14842061b844e2da474ab794a86c1 sig_cn_org=33bc1b2aef387028c510d1eb62306c75 source=15.7 
       <para>
        Dump only tablespaces, no databases or roles.
       </para>
________________________________________________________-->
       <para>
        仅转储表空间，不包括数据库或角色。
       </para>
<!-- pgdoc-cn_end sig_en=05e14842061b844e2da474ab794a86c1 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-v</option></term>
      <term><option>--verbose</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=78feee1a22fddbfdeadd65d591889cab sig_cn_org=e07dee2518b48f8b2f5cb6397fa55225 source=15.7 
       <para>
        Specifies verbose mode.  This will cause
        <application>pg_dumpall</application> to output start/stop
        times to the dump file, and progress messages to standard error.
        Repeating the option causes additional debug-level messages
        to appear on standard error.
        The option is also passed down to <application>pg_dump</application>.
       </para>
________________________________________________________-->
       <para>
        指定详细模式。这将导致<application>pg_dumpall</application>将开始/停止时间输出到转储文件，
        并将进度消息输出到标准错误。重复该选项会导致额外的调试级别消息出现在标准错误上。
        该选项也会传递给<application>pg_dump</application>。
</para>
<!-- pgdoc-cn_end sig_en=78feee1a22fddbfdeadd65d591889cab -->
      </listitem>
     </varlistentry>

     <varlistentry>
       <term><option>-V</option></term>
       <term><option>--version</option></term>
       <listitem>
<!-- pgdoc-cn_start sig_en=0e8ecf92d04b28c859dfc7e927cd3b02 sig_cn_org=a04f444db4ba9f002f94b5475aa57f59 source=15.7 
       <para>
       Print the <application>pg_dumpall</application> version and exit.
       </para>
________________________________________________________-->
       <para>
       打印<application>pg_dumpall</application>的版本并退出。
       </para>
<!-- pgdoc-cn_end sig_en=0e8ecf92d04b28c859dfc7e927cd3b02 -->
       </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-x</option></term>
      <term><option>--no-privileges</option></term>
      <term><option>--no-acl</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=85c67f4b40fa3e060e15432424c5c79c sig_cn_org=d4e0db605535e400b43245412625d3c4 source=15.7 
       <para>
        Prevent dumping of access privileges (grant/revoke commands).
       </para>
________________________________________________________-->
       <para>
        防止访问权限的泄露（grant/revoke命令）。
       </para>
<!-- pgdoc-cn_end sig_en=85c67f4b40fa3e060e15432424c5c79c -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--binary-upgrade</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=1ace8d1f36fd24dbb3b895c9fc1dc31f sig_cn_org=094d46588d8b3056bd70826c7ceb4525 source=15.7 
       <para>
        This option is for use by in-place upgrade utilities.  Its use
        for other purposes is not recommended or supported.  The
        behavior of the option may change in future releases without
        notice.
       </para>
________________________________________________________-->
       <para>
        此选项供就地升级实用程序使用。不建议或支持将其用于其他目的。该选项的行为可能在未来的版本中更改而不另行通知。
       </para>
<!-- pgdoc-cn_end sig_en=1ace8d1f36fd24dbb3b895c9fc1dc31f -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--column-inserts</option></term>
      <term><option>--attribute-inserts</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=fe413f512593dbd01f1e0dcbe8e32d32 sig_cn_org=ca09781260a8201f8bb562608f495017 source=15.7 
       <para>
        Dump data as <command>INSERT</command> commands with explicit
        column names (<literal>INSERT INTO
        <replaceable>table</replaceable>
        (<replaceable>column</replaceable>, ...) VALUES
        ...</literal>).  This will make restoration very slow; it is mainly
        useful for making dumps that can be loaded into
        non-<productname>PostgreSQL</productname> databases.
       </para>
________________________________________________________-->
       <para>
        将数据转储为带有显式列名的<command>INSERT</command>命令
        (<literal>INSERT INTO
        <replaceable>table</replaceable>
        (<replaceable>column</replaceable>, ...) VALUES
        ...</literal>)。这将使恢复过程非常缓慢；主要用于创建可加载到非<productname>PostgreSQL</productname>数据库中的转储文件。
       </para>
<!-- pgdoc-cn_end sig_en=fe413f512593dbd01f1e0dcbe8e32d32 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--disable-dollar-quoting</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=b135ce7b01532894da1f0f38ef6b6f81 sig_cn_org=e38b1328d46ea1c313719ae2e0cd1641 source=15.7 
       <para>
        This option disables the use of dollar quoting for function bodies,
        and forces them to be quoted using SQL standard string syntax.
       </para>
________________________________________________________-->
       <para>
        这个选项禁用了在函数体中使用美元引用的功能，并强制使用SQL标准字符串语法进行引用。
       </para>
<!-- pgdoc-cn_end sig_en=b135ce7b01532894da1f0f38ef6b6f81 -->
     </listitem>
    </varlistentry>

     <varlistentry>
      <term><option>--disable-triggers</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=44fb2ae76987c65adb4dc57198bb728e sig_cn_org=8852f0c3d387e2535ffa2ccdc659e8c7 source=15.7 
       <para>
        This option is relevant only when creating a data-only dump.
        It instructs <application>pg_dumpall</application> to include commands
        to temporarily disable triggers on the target tables while
        the data is restored.  Use this if you have referential
        integrity checks or other triggers on the tables that you
        do not want to invoke during data restore.
       </para>
________________________________________________________-->
       <para>
        此选项仅在创建仅数据转储时才相关。它指示<application>pg_dumpall</application>在恢复数据时包括命令以临时禁用目标表上的触发器。
        如果您在表上有引用完整性检查或其他触发器，而不希望在数据恢复期间调用它们，请使用此选项。
       </para>
<!-- pgdoc-cn_end sig_en=44fb2ae76987c65adb4dc57198bb728e -->

<!-- pgdoc-cn_start sig_en=3413f905a1a9cdc8f0a07d7d6f71ecbb sig_cn_org=d04b9762bdb5216bd85406fb479a560c source=15.7 
       <para>
        Presently, the commands emitted for <option>-&minus;disable-triggers</option>
        must be done as superuser.  So, you should also specify
        a superuser name with <option>-S</option>, or preferably be careful to
        start the resulting script as a superuser.
       </para>
________________________________________________________-->
       <para>
        目前，为了<option>--disable-triggers</option>选项发出的命令必须由超级用户执行。
        因此，您还应该使用<option>-S</option>指定一个超级用户名称，或者最好小心地
        以超级用户身份启动生成的脚本。
       </para>
<!-- pgdoc-cn_end sig_en=3413f905a1a9cdc8f0a07d7d6f71ecbb -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--exclude-database=<replaceable class="parameter">pattern</replaceable></option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=0af98ce1c5b99a713b502de01cc9f038 sig_cn_org=3ed72acf00054ad02a8ec794c9ce5057 source=15.7 
       <para>
        Do not dump databases whose name matches
        <replaceable class="parameter">pattern</replaceable>.
        Multiple patterns can be excluded by writing multiple
        <option>-&minus;exclude-database</option> switches.  The
        <replaceable class="parameter">pattern</replaceable> parameter is
        interpreted as a pattern according to the same rules used by
        <application>psql</application>'s <literal>\d</literal>
        commands (see <xref linkend="app-psql-patterns"/> below),
        so multiple databases can also be excluded by writing wildcard
        characters in the pattern.  When using wildcards, be careful to
        quote the pattern if needed to prevent shell wildcard expansion.
       </para>
________________________________________________________-->
       <para>
        不要转储数据库名称与<replaceable class="parameter">pattern</replaceable>匹配的数据库。
        可以通过编写多个<option>-&minus;exclude-database</option>参数来排除多个模式，
        使用多个<replaceable class="parameter">pattern</replaceable>参数按照<application>psql</application>的
        <literal>\d</literal>命令使用的相同规则进行解释（参见下面的<xref linkend="app-psql-patterns"/>），
        因此也可以通过在模式中写入通配符字符来排除多个数据库。使用通配符时，要小心引用模式，
        以防止shell通配符扩展。
       </para>
<!-- pgdoc-cn_end sig_en=0af98ce1c5b99a713b502de01cc9f038 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--extra-float-digits=<replaceable class="parameter">ndigits</replaceable></option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=c57254c219a605cdc080c43167be29cc sig_cn_org=04fa4697cfb44be43e505e706ce9eba5 source=15.7 
       <para>
        Use the specified value of extra_float_digits when dumping
        floating-point data, instead of the maximum available precision.
        Routine dumps made for backup purposes should not use this option.
       </para>
________________________________________________________-->
       <para>
        使用指定的extra_float_digits值来转储浮点数据，而不是使用最大可用精度。
        为了备份目的而进行的例行转储不应该使用这个选项。
       </para>
<!-- pgdoc-cn_end sig_en=c57254c219a605cdc080c43167be29cc -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--if-exists</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=d95768d0c689c3272172cb9653dfcbae sig_cn_org=6a33cbecacd1d42d0b1c080cea38440e source=15.7 
       <para>
        Use <literal>DROP ... IF EXISTS</literal> commands to drop objects
        in <option>-&minus;clean</option> mode.  This suppresses <quote>does not
        exist</quote> errors that might otherwise be reported.  This
        option is not valid unless <option>-&minus;clean</option> is also
        specified.
       </para>
________________________________________________________-->
       <para>
        使用<literal>DROP ... IF EXISTS</literal>命令在<option>--clean</option>模式下删除对象。
        这将抑制可能会报告的<quote>不存在</quote>错误。除非还指定了<option>--clean</option>，否则此选项无效。
       </para>
<!-- pgdoc-cn_end sig_en=d95768d0c689c3272172cb9653dfcbae -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--inserts</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=2c1f12f0b0b8cc85166e61d7f301761b sig_cn_org=a2ac95ce36b97a4d74877d8977c8f6da source=15.7 
       <para>
        Dump data as <command>INSERT</command> commands (rather
        than <command>COPY</command>).  This will make restoration very slow;
        it is mainly useful for making dumps that can be loaded into
        non-<productname>PostgreSQL</productname> databases.  Note that
        the restore might fail altogether if you have rearranged column order.
        The <option>-&minus;column-inserts</option> option is safer, though even
        slower.
       </para>
________________________________________________________-->
       <para>
        将数据转储为<command>INSERT</command>命令（而不是<command>COPY</command>）。
        这将使恢复非常缓慢；主要用于创建可以加载到非<productname>PostgreSQL</productname>数据库中的转储文件。
        请注意，如果您重新排列了列的顺序，恢复可能会完全失败。
        <option>--column-inserts</option>选项更安全，尽管更慢。
       </para>
<!-- pgdoc-cn_end sig_en=2c1f12f0b0b8cc85166e61d7f301761b -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--load-via-partition-root</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=959a7dd0b6dde53f805233a70c947162 sig_cn_org=949e54b5655f10d34da47bb7fe3e12ea source=15.7 
       <para>
        When dumping data for a table partition, make
        the <command>COPY</command> or <command>INSERT</command> statements
        target the root of the partitioning hierarchy that contains it, rather
        than the partition itself.  This causes the appropriate partition to
        be re-determined for each row when the data is loaded.  This may be
        useful when restoring data on a server where rows do not always fall
        into the same partitions as they did on the original server.  That
        could happen, for example, if the partitioning column is of type text
        and the two systems have different definitions of the collation used
        to sort the partitioning column.
       </para>
________________________________________________________-->
       <para>
        当为表分区转储数据时，使<command>COPY</command>或<command>INSERT</command>语句
        指向包含它的分区层次结构的根，而不是分区本身。这会导致在加载数据时为每一行重新确定适当的分区。
        当在一个服务器上恢复数据时，这可能很有用，因为行不总是落入与原始服务器上相同的分区中。
        例如，如果分区列是文本类型，并且两个系统对用于对分区列进行排序的排序规则的定义不同。
       </para>
<!-- pgdoc-cn_end sig_en=959a7dd0b6dde53f805233a70c947162 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--lock-wait-timeout=<replaceable class="parameter">timeout</replaceable></option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=f8237e9fb8e30514c9108bb68a8676b3 sig_cn_org=1c36c8aa81566c3751c540968edace78 source=15.7 
       <para>
        Do not wait forever to acquire shared table locks at the beginning of
        the dump. Instead, fail if unable to lock a table within the specified
        <replaceable class="parameter">timeout</replaceable>. The timeout may be
        specified in any of the formats accepted by <command>SET
        statement_timeout</command>.
       </para>
________________________________________________________-->
       <para>
        不要在转储开始时永远等待获取共享表锁。相反，如果在指定的<replaceable class="parameter">超时</replaceable>内无法锁定表，则失败。
        超时可以以<command>SET statement_timeout</command>接受的任何格式指定。
       </para>
<!-- pgdoc-cn_end sig_en=f8237e9fb8e30514c9108bb68a8676b3 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--no-comments</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=64d546f23c786035eab11f7e3446946f sig_cn_org=2a710f03352645f6a9bfff0524e68470 source=15.7 
       <para>
        Do not dump comments.
       </para>
________________________________________________________-->
       <para>
        不要转储注释。
       </para>
<!-- pgdoc-cn_end sig_en=64d546f23c786035eab11f7e3446946f -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--no-publications</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=e3beeac18caec38f8802d2bf9e9e3b33 sig_cn_org=59f697c70d54fe650003057644d77212 source=15.7 
       <para>
        Do not dump publications.
       </para>
________________________________________________________-->
       <para>
        不要倾倒出版物。
       </para>
<!-- pgdoc-cn_end sig_en=e3beeac18caec38f8802d2bf9e9e3b33 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--no-role-passwords</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=8f1553d9a326c69942aca27c83bbce88 sig_cn_org=089a6bb7f0ae9aa0123d6255ebe58e4e source=15.7 
       <para>
        Do not dump passwords for roles.  When restored, roles will have a
        null password, and password authentication will always fail until the
        password is set.  Since password values aren't needed when this option
        is specified, the role information is read from the catalog
        view <structname>pg_roles</structname> instead
        of <structname>pg_authid</structname>.  Therefore, this option also
        helps if access to <structname>pg_authid</structname> is restricted by
        some security policy.
       </para>
________________________________________________________-->
       <para>
        不要为角色转储密码。恢复时，角色将具有空密码，密码验证将始终失败，直到设置密码。
        当指定此选项时，不需要密码值，角色信息将从目录视图<structname>pg_roles</structname>中读取，
        而不是从<structname>pg_authid</structname>中读取。因此，如果某些安全策略限制对<structname>pg_authid</structname>的访问，
        此选项也会有所帮助。
       </para>
<!-- pgdoc-cn_end sig_en=8f1553d9a326c69942aca27c83bbce88 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--no-security-labels</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=a2c172083763a4a74f8d4a1fcf52a8b6 sig_cn_org=fcc07e4a6e4a7cb40598a38cb01af8f3 source=15.7 
       <para>
        Do not dump security labels.
       </para>
________________________________________________________-->
       <para>
        不要转储安全标签。
       </para>
<!-- pgdoc-cn_end sig_en=a2c172083763a4a74f8d4a1fcf52a8b6 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--no-subscriptions</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=9081e04bdf2696c648f265a07ee7896c sig_cn_org=f9f525f02440d6cbd5ae034e131d6856 source=15.7 
       <para>
        Do not dump subscriptions.
       </para>
________________________________________________________-->
       <para>
        不要删除订阅。
       </para>
<!-- pgdoc-cn_end sig_en=9081e04bdf2696c648f265a07ee7896c -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--no-sync</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=99d86b181048215b21814c19955f8b07 sig_cn_org=96e9edc0954bd2b6887a07e69090e624 source=15.7 
       <para>
        By default, <command>pg_dumpall</command> will wait for all files
        to be written safely to disk.  This option causes
        <command>pg_dumpall</command> to return without waiting, which is
        faster, but means that a subsequent operating system crash can leave
        the dump corrupt.  Generally, this option is useful for testing
        but should not be used when dumping data from production installation.
       </para>
________________________________________________________-->
       <para>
        默认情况下，<command>pg_dumpall</command>将等待所有文件安全写入磁盘。
        此选项导致<command>pg_dumpall</command>在不等待的情况下返回，这样更快，
        但意味着随后的操作系统崩溃可能会导致转储文件损坏。通常，此选项在测试时很有用，
        但在从生产安装中转储数据时不应使用。
       </para>
<!-- pgdoc-cn_end sig_en=99d86b181048215b21814c19955f8b07 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--no-table-access-method</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=251beb20effebb1dc7bbe7c07afa9fba sig_cn_org=50be1e448a8e7c071565528a251aba90 source=15.7 
       <para>
        Do not output commands to select table access methods.
        With this option, all objects will be created with whichever
        table access method is the default during restore.
       </para>
________________________________________________________-->
       <para>
        不要输出命令来选择表访问方法。
        使用此选项，在恢复期间将使用默认的表访问方法创建所有对象。
       </para>
<!-- pgdoc-cn_end sig_en=251beb20effebb1dc7bbe7c07afa9fba -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--no-tablespaces</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=d61cf61568f02f59d51cc22c1e152922 sig_cn_org=f06a5d17e46df06b46c662ecd187267d source=15.7 
       <para>
        Do not output commands to create tablespaces nor select tablespaces
        for objects.
        With this option, all objects will be created in whichever
        tablespace is the default during restore.
       </para>
________________________________________________________-->
       <para>
        不要输出创建表空间的命令，也不要为对象选择表空间。
        使用此选项，所有对象将在恢复期间默认的表空间中创建。
       </para>
<!-- pgdoc-cn_end sig_en=d61cf61568f02f59d51cc22c1e152922 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--no-toast-compression</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=c79c1335e60bf3d7be029edc92ab1f29 sig_cn_org=e5363650df1340148b083e096fc7d9ef source=15.7 
       <para>
        Do not output commands to set <acronym>TOAST</acronym> compression
        methods.
        With this option, all columns will be restored with the default
        compression setting.
       </para>
________________________________________________________-->
       <para>
        不要输出命令来设置<acronym>TOAST</acronym>压缩方法。
        使用此选项，所有列将以默认压缩设置恢复。
       </para>
<!-- pgdoc-cn_end sig_en=c79c1335e60bf3d7be029edc92ab1f29 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--no-unlogged-table-data</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=b5d995bb075a8daf9755d8be2579a831 sig_cn_org=6446cdcc98f2257540ba59d96613300c source=15.7 
       <para>
        Do not dump the contents of unlogged tables.  This option has no
        effect on whether or not the table definitions (schema) are dumped;
        it only suppresses dumping the table data.
       </para>
________________________________________________________-->
       <para>
        不要转储未记录表的内容。此选项不影响是否转储表定义（模式）；
        它只是抑制转储表数据。
       </para>
<!-- pgdoc-cn_end sig_en=b5d995bb075a8daf9755d8be2579a831 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--on-conflict-do-nothing</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=e0358870c7c3c14e0274f8308124a55b sig_cn_org=8aa469ccb4243686ef1e8b0dd7eb56d6 source=15.7 
       <para>
        Add <literal>ON CONFLICT DO NOTHING</literal> to
        <command>INSERT</command> commands.
        This option is not valid unless <option>-&minus;inserts</option> or
        <option>-&minus;column-inserts</option> is also specified.
       </para>
________________________________________________________-->
       <para>
        在<literal>ON CONFLICT DO NOTHING</literal>添加到<command>INSERT</command>命令中。
        除非还指定了<option>--inserts</option>或<option>--column-inserts</option>，否则此选项无效。
       </para>
<!-- pgdoc-cn_end sig_en=e0358870c7c3c14e0274f8308124a55b -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--quote-all-identifiers</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=d82830171f55cb91dad92de9a0eb33f5 sig_cn_org=ee68b6e336442f8a9df22c0d7983ef9d source=15.7 
       <para>
        Force quoting of all identifiers.  This option is recommended when
        dumping a database from a server whose <productname>PostgreSQL</productname>
        major version is different from <application>pg_dumpall</application>'s, or when
        the output is intended to be loaded into a server of a different
        major version.  By default, <application>pg_dumpall</application> quotes only
        identifiers that are reserved words in its own major version.
        This sometimes results in compatibility issues when dealing with
        servers of other versions that may have slightly different sets
        of reserved words.  Using <option>-&minus;quote-all-identifiers</option> prevents
        such issues, at the price of a harder-to-read dump script.
       </para>
________________________________________________________-->
       <para>
        强制引用所有标识符。当从一个主版本与<productname>PostgreSQL</productname>不同的服务器转储数据库时，
        或者当输出意图加载到一个不同主版本的服务器时，建议使用此选项。默认情况下，
        <application>pg_dumpall</application>仅引用其自身主版本中的保留字标识符。
        这有时会导致与其他版本服务器处理时出现兼容性问题，可能具有稍有不同的保留字集。
        使用<option>--quote-all-identifiers</option>可以避免这些问题，但会导致转储脚本更难阅读。
       </para>
<!-- pgdoc-cn_end sig_en=d82830171f55cb91dad92de9a0eb33f5 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--rows-per-insert=<replaceable class="parameter">nrows</replaceable></option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=1f257ad3e9aa76bf024b95b99814c1f9 sig_cn_org=1f52a22fb08cfe0fd9160fb718814580 source=15.7 
       <para>
        Dump data as <command>INSERT</command> commands (rather than
        <command>COPY</command>).  Controls the maximum number of rows per
        <command>INSERT</command> command. The value specified must be a
        number greater than zero.  Any error during restoring will cause only
        rows that are part of the problematic <command>INSERT</command> to be
        lost, rather than the entire table contents.
       </para>
________________________________________________________-->
       <para>
        将数据转储为<command>INSERT</command>命令（而不是<command>COPY</command>）。
        控制每个<command>INSERT</command>命令的最大行数。指定的值必须是大于零的数字。
        恢复过程中的任何错误将导致只有属于有问题的<command>INSERT</command>的行丢失，
        而不是整个表的内容。
       </para>
<!-- pgdoc-cn_end sig_en=1f257ad3e9aa76bf024b95b99814c1f9 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--use-set-session-authorization</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=72fe0c0cb5632905c5e2f98dc9a3d26e sig_cn_org=0602f3de1386e34a07031cff4c56761f source=15.7 
       <para>
        Output SQL-standard <command>SET SESSION AUTHORIZATION</command> commands
        instead of <command>ALTER OWNER</command> commands to determine object
        ownership.  This makes the dump more standards compatible, but
        depending on the history of the objects in the dump, might not restore
        properly.
       </para>
________________________________________________________-->
       <para>
        输出SQL标准的<command>SET SESSION AUTHORIZATION</command>命令，而不是<command>ALTER OWNER</command>命令来确定对象所有权。
        这使得转储更符合标准，但根据转储中对象的历史，可能无法正确恢复。
       </para>
<!-- pgdoc-cn_end sig_en=72fe0c0cb5632905c5e2f98dc9a3d26e -->
      </listitem>
     </varlistentry>

     <varlistentry>
       <term><option>-?</option></term>
       <term><option>--help</option></term>
       <listitem>
<!-- pgdoc-cn_start sig_en=ff293e900bb0129d61fed16c1c99088f sig_cn_org=89af3dcd8f076dc41ba9d48b3a50eed4 source=15.7 
       <para>
       Show help about <application>pg_dumpall</application> command line
       arguments, and exit.
       </para>
________________________________________________________-->
       <para>
       显示关于<application>pg_dumpall</application>命令行参数的帮助信息，并退出。
       </para>
<!-- pgdoc-cn_end sig_en=ff293e900bb0129d61fed16c1c99088f -->
       </listitem>
     </varlistentry>

    </variablelist>
   </para>

<!-- pgdoc-cn_start sig_en=e841a0767b169c307ed4e887389037c2 sig_cn_org=None source=14.1 
  <para>
   The following command-line options control the database connection parameters.

   <variablelist>
     <varlistentry>
      <term><option>-d <replaceable class="parameter">connstr</replaceable></option></term>
      <term><option>-&minus;dbname=<replaceable class="parameter">connstr</replaceable></option></term>
      <listitem>
       <para>
        Specifies parameters used to connect to the server, as a <link
        linkend="libpq-connstring">connection string</link>;  these
        will override any conflicting command line options.
       </para>
       <para>
        The option is called <literal>-&minus;dbname</literal> for consistency with other
        client applications, but because <application>pg_dumpall</application>
        needs to connect to many databases, the database name in the
        connection string will be ignored.  Use the <literal>-l</literal>
        option to specify the name of the database used for the initial
        connection, which will dump global objects and discover what other
        databases should be dumped.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-h <replaceable>host</replaceable></option></term>
      <term><option>-&minus;host=<replaceable>host</replaceable></option></term>
      <listitem>
       <para>
        Specifies the host name of the machine on which the database
        server is running.  If the value begins with a slash, it is
        used as the directory for the Unix domain socket.  The default
        is taken from the <envar>PGHOST</envar> environment variable,
        if set, else a Unix domain socket connection is attempted.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-l <replaceable>dbname</replaceable></option></term>
      <term><option>-&minus;database=<replaceable>dbname</replaceable></option></term>
      <listitem>
       <para>
         Specifies the name of the database to connect to for dumping global
         objects and discovering what other databases should be dumped. If
         not specified, the <literal>postgres</literal> database will be used,
         and if that does not exist, <literal>template1</literal> will be used.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-p <replaceable>port</replaceable></option></term>
      <term><option>-&minus;port=<replaceable>port</replaceable></option></term>
      <listitem>
       <para>
        Specifies the TCP port or local Unix domain socket file
        extension on which the server is listening for connections.
        Defaults to the <envar>PGPORT</envar> environment variable, if
        set, or a compiled-in default.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-U <replaceable>username</replaceable></option></term>
      <term><option>-&minus;username=<replaceable>username</replaceable></option></term>
      <listitem>
       <para>
        User name to connect as.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-w</option></term>
      <term><option>-&minus;no-password</option></term>
      <listitem>
       <para>
        Never issue a password prompt.  If the server requires
        password authentication and a password is not available by
        other means such as a <filename>.pgpass</filename> file, the
        connection attempt will fail.  This option can be useful in
        batch jobs and scripts where no user is present to enter a
        password.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-W</option></term>
      <term><option>-&minus;password</option></term>
      <listitem>
       <para>
        Force <application>pg_dumpall</application> to prompt for a
        password before connecting to a database.
       </para>

       <para>
        This option is never essential, since
        <application>pg_dumpall</application> will automatically prompt
        for a password if the server demands password authentication.
        However, <application>pg_dumpall</application> will waste a
        connection attempt finding out that the server wants a password.
        In some cases it is worth typing <option>-W</option> to avoid the extra
        connection attempt.
       </para>

       <para>
        Note that the password prompt will occur again for each database
        to be dumped.  Usually, it's better to set up a
        <filename>~/.pgpass</filename> file than to rely on manual password entry.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-&minus;role=<replaceable class="parameter">rolename</replaceable></option></term>
      <listitem>
       <para>
        Specifies a role name to be used to create the dump.
        This option causes <application>pg_dumpall</application> to issue a
        <command>SET ROLE</command> <replaceable class="parameter">rolename</replaceable>
        command after connecting to the database. It is useful when the
        authenticated user (specified by <option>-U</option>) lacks privileges
        needed by <application>pg_dumpall</application>, but can switch to a role with
        the required rights.  Some installations have a policy against
        logging in directly as a superuser, and use of this option allows
        dumps to be made without violating the policy.
       </para>
      </listitem>
     </varlistentry>
   </variablelist>
  </para>
________________________________________________________-->
  <para>
   下列命令行选项控制数据库连接参数。

   <variablelist>
     <varlistentry>
      <term><option>-d <replaceable class="parameter">connstr</replaceable></option></term>
      <term><option>--dbname=<replaceable class="parameter">connstr</replaceable></option></term>
      <listitem>
       <para>
        指定用于连接到服务器的参数，比如<link linkend="libpq-connstring">连接字符串</link>；这些将覆盖所有冲突的命令行选项。
       </para>
       <para>
        这个选项被称为<literal>--dbname</literal>是为了和其他客户端应用一致，但是因为<application>pg_dumpall</application>需要连接多个数据库，连接字符串中的数据库名将被忽略。使用<literal>-l</literal>选项指定一个数据库，该数据库被用于初始连接，这将转储全局对象并且发现需要转储哪些其他数据库。
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-h <replaceable>host</replaceable></option></term>
      <term><option>--host=<replaceable>host</replaceable></option></term>
      <listitem>
       <para>
        指定服务器正在运行的机器的主机名。如果该值开始于一个斜线，它被用作一个 Unix 域套接字的目录。默认是从<envar>PGHOST</envar>环境变量中取得（如果被设置），否则将尝试一次 Unix 域套接字连接。
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-l <replaceable>dbname</replaceable></option></term>
      <term><option>--database=<replaceable>dbname</replaceable></option></term>
      <listitem>
       <para>
         指定要连接到哪个数据库转储全局对象以及发现要转储哪些其他数据库。如果没有指定，将会使用<literal>postgres</literal>数据库，如果<literal>postgres</literal>不存在，就使用 <literal>template1</literal>。
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-p <replaceable>port</replaceable></option></term>
      <term><option>--port=<replaceable>port</replaceable></option></term>
      <listitem>
       <para>
        指定服务器正在监听连接的 TCP 端口或本地 Unix 域套接字文件扩展名。默认是放在<envar>PGPORT</envar>环境变量中（如果被设置），否则使用编译在程序中的默认值。
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-U <replaceable>username</replaceable></option></term>
      <term><option>--username=<replaceable>username</replaceable></option></term>
      <listitem>
       <para>
        要作为哪个用户连接。
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-w</option></term>
      <term><option>--no-password</option></term>
      <listitem>
       <para>
        从不发出一个口令提示。如果服务器要求口令认证并且没有其他方式提供口令（例如一个<filename>.pgpass</filename>文件），那儿连接尝试将失败。这个选项对于批处理任务和脚本有用，因为在其中没有一个用户来输入口令。
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-W</option></term>
      <term><option>--password</option></term>
      <listitem>
       <para>
        强制<application>pg_dumpall</application>在连接到一个数据库之前提示要求一个口令。
       </para>

       <para>
        这个选项从来不是必须的，因为如果服务器要求口令认证，<application>pg_dumpall</application>将自动提示要求一个口令。但是，<application>pg_dumpall</application>将浪费一次连接尝试来发现服务器想要一个口令。在某些情况下，值得键入<option>-W</option>来避免额外的连接尝试。
       </para>

       <para>
        注意对每个要被转储的数据库，口令提示都会再次出现。通常，最好设置一个<filename>~/.pgpass</filename>文件来减少手工口令输入。
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--role=<replaceable class="parameter">rolename</replaceable></option></term>
      <listitem>
       <para>
        指定一个用来创建该转储的角色名。这个选项导致<application>pg_dump</application>在连接到数据库后发出一个<command>SET ROLE</command> <replaceable class="parameter">rolename</replaceable>命令。当已认证用户（由<option>-U</option>指定）缺少<application>pg_dump</application>所需的特权但是能够切换到一个具有所需权利的角色时，这个选项很有用。一些安装有针对直接作为超级用户登录的策略，使用这个选项可以让转储在不违反该策略的前提下完成。
       </para>
      </listitem>
     </varlistentry>
   </variablelist>
  </para>
<!-- pgdoc-cn_end sig_en=e841a0767b169c307ed4e887389037c2 -->
 </refsect1>


 <refsect1>
<!-- pgdoc-cn_start sig_en=3b1cdb4e9f7c411322dc1c76ca7f31f3 sig_cn_org=None source=14.1 
  <title>Environment</title>
________________________________________________________-->
  <title>环境</title>
<!-- pgdoc-cn_end sig_en=3b1cdb4e9f7c411322dc1c76ca7f31f3 -->

  <variablelist>
   <varlistentry>
    <term><envar>PGHOST</envar></term>
    <term><envar>PGOPTIONS</envar></term>
    <term><envar>PGPORT</envar></term>
    <term><envar>PGUSER</envar></term>

    <listitem>
<!-- pgdoc-cn_start sig_en=f7ab7b218ecca66806b20eda9af62912 sig_cn_org=None source=14.1 
     <para>
      Default connection parameters
     </para>
________________________________________________________-->
     <para>
      默认连接参数
     </para>
<!-- pgdoc-cn_end sig_en=f7ab7b218ecca66806b20eda9af62912 -->
    </listitem>
   </varlistentry>

   <varlistentry>
    <term><envar>PG_COLOR</envar></term>
    <listitem>
<!-- pgdoc-cn_start sig_en=39edaf7f74e555fd049f4cbfdb1bb1dd sig_cn_org=None source=14.1 
     <para>
      Specifies whether to use color in diagnostic messages. Possible values
      are <literal>always</literal>, <literal>auto</literal> and
      <literal>never</literal>.
     </para>
________________________________________________________-->
     <para>
      规定在诊断消息中是否使用颜色。可能的值为<literal>always</literal>、 <literal>auto</literal>、<literal>never</literal>。
     </para>
<!-- pgdoc-cn_end sig_en=39edaf7f74e555fd049f4cbfdb1bb1dd -->
    </listitem>
   </varlistentry>
  </variablelist>

<!-- pgdoc-cn_start sig_en=18623d3e90c0b63e38e8518be27a3237 sig_cn_org=None source=14.1 
  <para>
   This utility, like most other <productname>PostgreSQL</productname> utilities,
   also uses the environment variables supported by <application>libpq</application>
   (see <xref linkend="libpq-envars"/>).
  </para>
________________________________________________________-->
  <para>
   和大部分其他<productname>PostgreSQL</productname>工具相似，这个工具也使用<application>libpq</application>（见<xref linkend="libpq-envars"/>）支持的环境变量。
  </para>
<!-- pgdoc-cn_end sig_en=18623d3e90c0b63e38e8518be27a3237 -->

 </refsect1>


 <refsect1>
<!-- pgdoc-cn_start sig_en=c44fa43baeb4f69a8a2aa1ea108c6e97 sig_cn_org=None source=14.1 
  <title>Notes</title>
________________________________________________________-->
  <title>注解</title>
<!-- pgdoc-cn_end sig_en=c44fa43baeb4f69a8a2aa1ea108c6e97 -->

<!-- pgdoc-cn_start sig_en=a6cfe05e4a847298320e5024487dfe51 sig_cn_org=None source=14.1 
  <para>
   Since <application>pg_dumpall</application> calls
   <application>pg_dump</application> internally, some diagnostic
   messages will refer to <application>pg_dump</application>.
  </para>
________________________________________________________-->
  <para>
   因为<application>pg_dumpall</application>在内部调用<application>pg_dump</application>，所以， 一些诊断消息可以参考<application>pg_dump</application>。
  </para>
<!-- pgdoc-cn_end sig_en=a6cfe05e4a847298320e5024487dfe51 -->

<!-- pgdoc-cn_start sig_en=ac2bce47dfe91bb26ea0252feec0dbf5 sig_cn_org=None source=14.1 
  <para>
   The <option>-&minus;clean</option> option can be useful even when your
   intention is to restore the dump script into a fresh cluster.  Use of
   <option>-&minus;clean</option> authorizes the script to drop and re-create the
   built-in <literal>postgres</literal> and <literal>template1</literal>
   databases, ensuring that those databases will retain the same properties
   (for instance, locale and encoding) that they had in the source cluster.
   Without the option, those databases will retain their existing
   database-level properties, as well as any pre-existing contents.
  </para>
________________________________________________________-->
  <para>
   即使当用户的目的是把转储脚本恢复到一个空的集簇中，<option>--clean</option>选项也有用武之地。<option>--clean</option>的使用让该脚本删除并且重建内建的<literal>postgres</literal>和<literal>template1</literal>数据库，确保这两个数据库保持与源集簇中相同的属性（例如locale和编码）。如果不用这个选项，这两个数据库将保持它们现有的数据库级属性以及任何已有的内容。
  </para>
<!-- pgdoc-cn_end sig_en=ac2bce47dfe91bb26ea0252feec0dbf5 -->

<!-- pgdoc-cn_start sig_en=0e4dbfc39f63e31cb241efcc987efcb0 sig_cn_org=None source=14.1 
  <para>
   Once restored, it is wise to run <command>ANALYZE</command> on each
   database so the optimizer has useful statistics. You
   can also run <command>vacuumdb -a -z</command> to analyze all
   databases.
  </para>
________________________________________________________-->
  <para>
   一旦恢复，建议在每个数据库上运行<command>ANALYZE</command>，这样优化器就可以得到有用的统计信息。你也可以运行<command>vacuumdb -a -z</command>来分析所有数据库。
  </para>
<!-- pgdoc-cn_end sig_en=0e4dbfc39f63e31cb241efcc987efcb0 -->

<!-- pgdoc-cn_start sig_en=c695e570f83e38575faa1595e921af3d sig_cn_org=None source=14.1 
  <para>
   The dump script should not be expected to run completely without errors.
   In particular, because the script will issue <command>CREATE ROLE</command>
   for every role existing in the source cluster, it is certain to get a
   <quote>role already exists</quote> error for the bootstrap superuser,
   unless the destination cluster was initialized with a different bootstrap
   superuser name.  This error is harmless and should be ignored.  Use of
   the <option>-&minus;clean</option> option is likely to produce additional
   harmless error messages about non-existent objects, although you can
   minimize those by adding <option>-&minus;if-exists</option>.
  </para>
________________________________________________________-->
  <para>
   不应该预期转储脚本运行到结束都不出错。特别是由于脚本将为源集簇中已有的每一个角色发出<command>CREATE ROLE</command>语句，对于bootstrap超级用户当然会得到一个<quote>role already exists</quote>错误，除非目标集簇用一个不同的bootstrap超级用户名完成的初始化。这种错误是无害的并且应该被忽略。<option>--clean</option>选项的使用很可能会产生额外的有关于不存在对象的无害错误消息，不过可以通过加上<option>--if-exists</option>减少这类错误消息。
  </para>
<!-- pgdoc-cn_end sig_en=c695e570f83e38575faa1595e921af3d -->

<!-- pgdoc-cn_start sig_en=725441e9d5739d90578c076b3bdbeebc sig_cn_org=None source=14.1 
  <para>
   <application>pg_dumpall</application> requires all needed
   tablespace directories to exist before the restore;  otherwise,
   database creation will fail for databases in non-default
   locations.
  </para>
________________________________________________________-->
  <para>
   <application>pg_dumpall</application>要求所有需要的表空间目录在进行恢复之前就必须存在；否则，数据库创建就会由于在非默认位置创建数据库而失败。
  </para>
<!-- pgdoc-cn_end sig_en=725441e9d5739d90578c076b3bdbeebc -->
 </refsect1>


 <refsect1 id="app-pg-dumpall-ex">
<!-- pgdoc-cn_start sig_en=8f24ed0a9e4d47ffa2be9a1f3e09fa6d sig_cn_org=None source=14.1 
  <title>Examples</title>
________________________________________________________-->
  <title>例子</title>
<!-- pgdoc-cn_end sig_en=8f24ed0a9e4d47ffa2be9a1f3e09fa6d -->
<!-- pgdoc-cn_start sig_en=ca137f9e135ab94014c452df739300ea sig_cn_org=None source=14.1 
  <para>
   To dump all databases:

<screen>
<prompt>$</prompt> <userinput>pg_dumpall &gt; db.out</userinput>
</screen>
  </para>
________________________________________________________-->
  <para>
   要转储所有数据库：

<screen>
<prompt>$</prompt> <userinput>pg_dumpall &gt; db.out</userinput>
</screen>
  </para>
<!-- pgdoc-cn_end sig_en=ca137f9e135ab94014c452df739300ea -->

<!-- pgdoc-cn_start sig_en=3e2108a3a5525e97a8610d3dd6a4a1c0 sig_cn_org=274cb410d62166cd7916a5d09f5debee source=15.7 
  <para>
   To restore database(s) from this file, you can use:
<screen>
<prompt>$</prompt> <userinput>psql -f db.out postgres</userinput>
</screen>
   It is not important to which database you connect here since the
   script file created by <application>pg_dumpall</application> will
   contain the appropriate commands to create and connect to the saved
   databases.  An exception is that if you specified <option>-&minus;clean</option>,
   you must connect to the <literal>postgres</literal> database initially;
   the script will attempt to drop other databases immediately, and that
   will fail for the database you are connected to.
  </para>
________________________________________________________-->
  <para>
   要从此文件还原数据库，您可以使用：
<screen>
<prompt>$</prompt> <userinput>psql -f db.out postgres</userinput>
</screen>
   在这里连接到哪个数据库并不重要，因为由<application>pg_dumpall</application>创建的脚本文件将包含创建和连接到保存的数据库的适当命令。
   一个例外是，如果您指定了<option>--clean</option>，则必须最初连接到<literal>postgres</literal>数据库；
   脚本将立即尝试删除其他数据库，这将导致您连接的数据库删除失败。
</para>
<!-- pgdoc-cn_end sig_en=3e2108a3a5525e97a8610d3dd6a4a1c0 -->
 </refsect1>

 <refsect1>
<!-- pgdoc-cn_start sig_en=8b7cc214676b443e6527e3d6bf054420 sig_cn_org=None source=14.1 
  <title>See Also</title>
________________________________________________________-->
  <title>参见</title>
<!-- pgdoc-cn_end sig_en=8b7cc214676b443e6527e3d6bf054420 -->

<!-- pgdoc-cn_start sig_en=51678014e7747a514e8c37d8afd38758 sig_cn_org=None source=14.1 
  <para>
    Check <xref linkend="app-pgdump"/> for details on possible
    error conditions.
  </para>
________________________________________________________-->
  <para>
    可能的错误情况请查看<xref linkend="app-pgdump"/>。
  </para>
<!-- pgdoc-cn_end sig_en=51678014e7747a514e8c37d8afd38758 -->
 </refsect1>

</refentry>
