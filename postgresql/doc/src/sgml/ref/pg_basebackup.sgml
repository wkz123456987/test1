<!--
doc/src/sgml/ref/pg_basebackup.sgml
PostgreSQL documentation
-->

<refentry id="app-pgbasebackup">
<!-- pgdoc-cn_start sig_en=d3bdb8855da81d49bbcd80656633f571 sig_cn_org=None source=14.1 
 <indexterm zone="app-pgbasebackup">
  <primary>pg_basebackup</primary>
 </indexterm>
________________________________________________________-->
 <indexterm zone="app-pgbasebackup">
  <primary>pg_basebackup</primary>
 </indexterm>
<!-- pgdoc-cn_end sig_en=d3bdb8855da81d49bbcd80656633f571 -->

 <refmeta>
  <refentrytitle><application>pg_basebackup</application></refentrytitle>
  <manvolnum>1</manvolnum>
  <refmiscinfo>Application</refmiscinfo>
 </refmeta>

<!-- pgdoc-cn_start sig_en=42e235a8d9c5a835ea9b0d2876a7ef7e sig_cn_org=None source=14.1 
 <refnamediv>
  <refname>pg_basebackup</refname>
  <refpurpose>take a base backup of a <productname>PostgreSQL</productname> cluster</refpurpose>
 </refnamediv>
________________________________________________________-->
 <refnamediv>
  <refname>pg_basebackup</refname>
  <refpurpose>获得一个<productname>PostgreSQL</productname>集簇的一个基础备份</refpurpose>
 </refnamediv>
<!-- pgdoc-cn_end sig_en=42e235a8d9c5a835ea9b0d2876a7ef7e -->

 <refsynopsisdiv>
  <cmdsynopsis>
   <command>pg_basebackup</command>
   <arg rep="repeat"><replaceable>option</replaceable></arg>
  </cmdsynopsis>
 </refsynopsisdiv>

 <refsect1>
<!-- pgdoc-cn_start sig_en=59d6e86f3a60db4f1e08d0d6e639924e sig_cn_org=None source=14.1 
  <title>Description</title>
________________________________________________________-->
  <title>描述</title>
<!-- pgdoc-cn_end sig_en=59d6e86f3a60db4f1e08d0d6e639924e -->
<!-- pgdoc-cn_start sig_en=3c501407fc7e0963a4219bf1178c8a56 sig_cn_org=None source=14.1 
  <para>
   <application>pg_basebackup</application> is used to take a base backup of
   a running <productname>PostgreSQL</productname> database cluster. The backup
   is taken without affecting other clients of the database, and can be used
   both for point-in-time recovery (see <xref linkend="continuous-archiving"/>)
   and as the starting point for a log-shipping or streaming-replication standby
   server (see <xref linkend="warm-standby"/>).
  </para>
________________________________________________________-->
  <para>
   <application>pg_basebackup</application>被用于获得一个正在运行的<productname>PostgreSQL</productname>数据库集簇的基础备份。获得这些备份不会影响数据库的其他客户端，并且可以被用于时间点恢复（见<xref linkend="continuous-archiving"/>）以及用作一个日志传送或流复制后备服务器的开始点（见<xref linkend="warm-standby"/>）。
  </para>
<!-- pgdoc-cn_end sig_en=3c501407fc7e0963a4219bf1178c8a56 -->

<!-- pgdoc-cn_start sig_en=6b9876b22752de835349ce9e1bdcae8b sig_cn_org=None source=14.1 
  <para>
   <application>pg_basebackup</application> makes an exact copy of the database
   cluster's files, while making sure the server is put into and
   out of backup mode automatically. Backups are always taken of the entire
   database cluster; it is not possible to back up individual databases or
   database objects. For selective backups, another tool such as
   <xref linkend="app-pgdump"/> must be used.
  </para>
________________________________________________________-->
  <para>
   <application>pg_basebackup</application>对数据库群集的文件进行精确复制，同时确保服务器自动进入和退出备份模式。备份总是从整个数据库集簇获得，不可能备份单个数据库或数据库对象。关于选择性备份，必须使用一个像<xref linkend="app-pgdump"/>的工具。
  </para>
<!-- pgdoc-cn_end sig_en=6b9876b22752de835349ce9e1bdcae8b -->

<!-- pgdoc-cn_start sig_en=d0c4db4dbfb104891281ad21ac389aa6 sig_cn_org=None source=14.1 
  <para>
   The backup is made over a regular <productname>PostgreSQL</productname>
   connection that uses the replication protocol. The connection must be made
   with a user ID that has <literal>REPLICATION</literal> permissions
   (see <xref linkend="role-attributes"/>) or is a superuser,
   and <link linkend="auth-pg-hba-conf"><filename>pg_hba.conf</filename></link>
   must permit the replication connection. The server must also be configured
   with <xref linkend="guc-max-wal-senders"/> set high enough to provide at
   least one walsender for the backup plus one for WAL streaming (if used).
  </para>
________________________________________________________-->
  <para>
   备份通过一个使用复制协议常规<productname>PostgreSQL</productname>连接制作。该连接必须由一个具有<literal>REPLICATION</literal>权限（详见<xref linkend="role-attributes"/>）或者具有超级用户权限的用户ID建立，并且<link linkend="auth-pg-hba-conf"><filename>pg_hba.conf</filename></link>必须允许该复制连接。该服务器还必须被配置，使<xref linkend="guc-max-wal-senders"/>设置得足够高以提供至少一个walsender用于备份以及一个用于WAL流（如果使用流）。
  </para>
<!-- pgdoc-cn_end sig_en=d0c4db4dbfb104891281ad21ac389aa6 -->

<!-- pgdoc-cn_start sig_en=3a0431e01e6512dd33af2facecf7533e sig_cn_org=None source=14.1 
  <para>
   There can be multiple <command>pg_basebackup</command>s running at the same time, but it is usually
   better from a performance point of view to take only one backup, and copy
   the result.
  </para>
________________________________________________________-->
  <para>
   在同一时间可以有多个<command>pg_basebackup</command>运行，但是从性能的角度来说，只进行一次备份并且复制结果通常更好。
  </para>
<!-- pgdoc-cn_end sig_en=3a0431e01e6512dd33af2facecf7533e -->

<!-- pgdoc-cn_start sig_en=646c147a1a22db98c7ff1fad03feb139 sig_cn_org=None source=14.1 
  <para>
   <application>pg_basebackup</application> can make a base backup from
   not only a primary server but also a standby. To take a backup from a standby,
   set up the standby so that it can accept replication connections (that is, set
   <varname>max_wal_senders</varname> and <xref linkend="guc-hot-standby"/>,
   and configure its <filename>pg_hba.conf</filename> appropriately).
   You will also need to enable <xref linkend="guc-full-page-writes"/> on the primary.
  </para>
________________________________________________________-->
  <para>
   <application>pg_basebackup</application>不仅能从主控机也能从后备机创建一个基础备份。要从后备机获得一个备份，设置后备机让它能接受复制连接（也就是，设置<varname>max_wal_senders</varname>和<xref linkend="guc-hot-standby"/>，并且适当配置其<filename>pg_hba.conf</filename>）。你将也需要在主控机上启用<xref linkend="guc-full-page-writes"/>。
  </para>
<!-- pgdoc-cn_end sig_en=646c147a1a22db98c7ff1fad03feb139 -->

<!-- pgdoc-cn_start sig_en=dafaebbe167f8f943464deefd7f968d8 sig_cn_org=a9bf188d82178437d509b4c67c0c4111 source=15.7 
  <para>
   Note that there are some limitations in taking a backup from a standby:

   <itemizedlist>
    <listitem>
     <para>
      The backup history file is not created in the database cluster backed up.
     </para>
    </listitem>
    <listitem>
     <para>
      <application>pg_basebackup</application> cannot force the standby
      to switch to a new WAL file at the end of backup.
      When you are using <literal>-X none</literal>, if write activity on
      the primary is low, <application>pg_basebackup</application> may
      need to wait a long time for the last WAL file required for the backup
      to be switched and archived.  In this case, it may be useful to run
      <function>pg_switch_wal</function> on the primary in order to
      trigger an immediate WAL file switch.
     </para>
    </listitem>
    <listitem>
     <para>
      If the standby is promoted to be primary during backup, the backup fails.
     </para>
    </listitem>
    <listitem>
     <para>
      All WAL records required for the backup must contain sufficient full-page writes,
      which requires you to enable <varname>full_page_writes</varname> on the primary.
     </para>
    </listitem>
   </itemizedlist>
  </para>
________________________________________________________-->
  <para>
   请注意，在备用机上备份存在一些限制：

   <itemizedlist>
    <listitem>
     <para>
      备份历史文件不会在备份的数据库集群中创建。
     </para>
    </listitem>
    <listitem>
     <para>
      <application>pg_basebackup</application>无法强制备用机在备份结束时切换到新的WAL文件。
      当您使用<literal>-X none</literal>时，如果主机上的写入活动较少，
      <application>pg_basebackup</application>可能需要等待很长时间，
      直到备份所需的最后一个WAL文件被切换并归档。在这种情况下，
      可以在主机上运行<function>pg_switch_wal</function>来触发立即切换WAL文件。
     </para>
    </listitem>
    <listitem>
     <para>
      如果在备份过程中将备用机提升为主机，则备份将失败。
     </para>
    </listitem>
    <listitem>
     <para>
      所有备份所需的WAL记录必须包含足够的全页写入，
      这要求您在主机上启用<varname>full_page_writes</varname>。
     </para>
    </listitem>
   </itemizedlist>
  </para>
<!-- pgdoc-cn_end sig_en=dafaebbe167f8f943464deefd7f968d8 -->

<!-- pgdoc-cn_start sig_en=d3a94c2ecae81ba1a6f564818cd840ba sig_cn_org=None source=14.1 
  <para>
   Whenever <application>pg_basebackup</application> is taking a base
   backup, the server's <structname>pg_stat_progress_basebackup</structname>
   view will report the progress of the backup.
   See <xref linkend="basebackup-progress-reporting"/> for details.
  </para>
________________________________________________________-->
  <para>
   每当<application>pg_basebackup</application>进行基本备份时，服务器的<structname>pg_stat_progress_basebackup</structname>视图将报告备份的进度。有关详细信息，请参见<xref linkend="basebackup-progress-reporting"/>。
  </para>
<!-- pgdoc-cn_end sig_en=d3a94c2ecae81ba1a6f564818cd840ba -->
 </refsect1>

 <refsect1>
<!-- pgdoc-cn_start sig_en=ee3f399228d18d2103d5b7f4e0aeeba8 sig_cn_org=None source=14.1 
  <title>Options</title>
________________________________________________________-->
  <title>选项</title>
<!-- pgdoc-cn_end sig_en=ee3f399228d18d2103d5b7f4e0aeeba8 -->

<!-- pgdoc-cn_start sig_en=e2c129c9913e5ebf280bfc00e0e04049 sig_cn_org=7874b6f1f77cce8b601b5889c2112626 source=15.7 
   <para>
    The following command-line options control the location and format of the
    output:

    <variablelist>
     <varlistentry>
________________________________________________________-->
   <para>
    以下命令行选项控制输出的位置和格式：

    <variablelist>
     <varlistentry>
<!-- pgdoc-cn_end sig_en=e2c129c9913e5ebf280bfc00e0e04049 -->
      <term><option>-D <replaceable class="parameter">directory</replaceable></option></term>
      <term><option>--pgdata=<replaceable class="parameter">directory</replaceable></option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=2ad82b19a72c7d43d4ed62358dd6c0b3 sig_cn_org=1099e3acffa4a2fe1efb6321e102fd76 source=15.7 
       <para>
        Sets the target directory to write the output to.
        <application>pg_basebackup</application> will create this directory
        (and any missing parent directories) if it does not exist.  If it
        already exists, it must be empty.
       </para>
________________________________________________________-->
       <para>
        设置要写入输出的目标目录。
        <application>pg_basebackup</application>将创建此目录（以及任何缺失的父目录），如果它不存在的话。
        如果它已经存在，它必须是空的。
       </para>
<!-- pgdoc-cn_end sig_en=2ad82b19a72c7d43d4ed62358dd6c0b3 -->
<!-- pgdoc-cn_start sig_en=3fb097d672671d1c67ea800ad6335e52 sig_cn_org=3d9288700007174818a4c0a846a4861d source=15.7 
       <para>
        When the backup is in tar format, the target directory may be
        specified as <literal>-</literal> (dash), causing the tar file to be
        written to <literal>stdout</literal>.
       </para>
________________________________________________________-->
       <para>
        当备份以tar格式保存时，目标目录可以指定为<literal>-</literal>（破折号），导致tar文件被写入<literal>stdout</literal>。
       </para>
<!-- pgdoc-cn_end sig_en=3fb097d672671d1c67ea800ad6335e52 -->
<!-- pgdoc-cn_start sig_en=231e2988a26ad8ebf564f6c4710a1ead sig_cn_org=ea1da6331fa8cec57ed52a965cf40043 source=15.7 
       <para>
        This option is required.
       </para>
________________________________________________________-->
       <para>
        这个选项是必需的。
       </para>
<!-- pgdoc-cn_end sig_en=231e2988a26ad8ebf564f6c4710a1ead -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-F <replaceable class="parameter">format</replaceable></option></term>
      <term><option>--format=<replaceable class="parameter">format</replaceable></option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=21f90b42c769d792da97794cdedb20f9 sig_cn_org=990024fdeaee0e829458f22a033f5099 source=15.7 
       <para>
        Selects the format for the output. <replaceable>format</replaceable>
        can be one of the following:

        <variablelist>
         <varlistentry>
          <term><literal>p</literal></term>
          <term><literal>plain</literal></term>
          <listitem>
           <para>
            Write the output as plain files, with the same layout as the
            source server's data directory and tablespaces. When the cluster has
            no additional tablespaces, the whole database will be placed in
            the target directory. If the cluster contains additional
            tablespaces, the main data directory will be placed in the
            target directory, but all other tablespaces will be placed
            in the same absolute path as they have on the source server.
            (See <option>-&minus;tablespace-mapping</option> to change that.)
           </para>
           <para>
            This is the default format.
           </para>
          </listitem>
         </varlistentry>

         <varlistentry>
          <term><literal>t</literal></term>
          <term><literal>tar</literal></term>
          <listitem>
           <para>
            Write the output as tar files in the target directory. The main
            data directory's contents will be written to a file named
            <filename>base.tar</filename>, and each other tablespace will be
            written to a separate tar file named after that tablespace's OID.
           </para>
           <para>
            If the target directory is specified as <literal>-</literal>
            (dash), the tar contents will be written to
            standard output, suitable for piping to (for example)
            <productname>gzip</productname>. This is only allowed if
            the cluster has no additional tablespaces and WAL
            streaming is not used.
           </para>
           </listitem>
         </varlistentry>
        </variablelist></para>
________________________________________________________-->
       <para>
        选择输出的格式。<replaceable>format</replaceable>可以是以下之一：

        <variablelist>
         <varlistentry>
          <term><literal>p</literal></term>
          <term><literal>plain</literal></term>
          <listitem>
           <para>
            将输出写成普通文件，布局与源服务器的数据目录和表空间相同。当集群没有额外的表空间时，整个数据库将放在目标目录中。
            如果集群包含额外的表空间，则主数据目录将放在目标目录中，但所有其他表空间将放在与源服务器上相同的绝对路径中。
            （参见<option>--tablespace-mapping</option>以更改此设置。）
           </para>
           <para>
            这是默认格式。
           </para>
          </listitem>
         </varlistentry>

         <varlistentry>
          <term><literal>t</literal></term>
          <term><literal>tar</literal></term>
          <listitem>
           <para>
            将输出写成tar文件放在目标目录中。主数据目录的内容将被写入名为<filename>base.tar</filename>的文件中，
            每个其他表空间将被写入一个名为该表空间OID的单独的tar文件中。
           </para>
           <para>
            如果目标目录被指定为<literal>-</literal>（破折号），tar内容将被写入标准输出，适合用于管道传输（例如）<productname>gzip</productname>。
            只有当集群没有额外的表空间且不使用WAL流时才允许这样做。
           </para>
           </listitem>
         </varlistentry>
        </variablelist>
</para>
<!-- pgdoc-cn_end sig_en=21f90b42c769d792da97794cdedb20f9 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-R</option></term>
      <term><option>--write-recovery-conf</option></term>
      <listitem>

<!-- pgdoc-cn_start sig_en=c56ce1dea87d64fd7db93f773af0f609 sig_cn_org=fe5797f502b84aeb09f180f907c7d0df source=15.7 
       <para>
        Creates a
        <link linkend="file-standby-signal"><filename>standby.signal</filename></link>
        <indexterm><primary><filename>standby.signal</filename></primary><secondary>pg_basebackup -&minus;write-recovery-conf</secondary></indexterm>
        file and appends
        connection settings to the <filename>postgresql.auto.conf</filename>
        file in the target directory (or within the base archive file when
        using tar format).  This eases setting up a standby server using the
        results of the backup.
       </para>
________________________________________________________-->
       <para>
        创建一个<link linkend="file-standby-signal"><filename>standby.signal</filename></link>
		<indexterm><primary><filename>standby.signal</filename></primary><secondary>pg_basebackup --write-recovery-conf</secondary></indexterm>文件，
		并将连接设置附加到<filename>postgresql.auto.conf</filename>文件中的目标目录（或在使用tar格式时在基本归档文件中）。这样可以使用备份的结果轻松设置一个备用服务器。
       </para>
<!-- pgdoc-cn_end sig_en=c56ce1dea87d64fd7db93f773af0f609 -->
<!-- pgdoc-cn_start sig_en=b8bf4e34a2192ddacdb987fbe669b9e3 sig_cn_org=703b7cfdf2f851175b9d5ddc575e456c source=15.7 
       <para>
        The <filename>postgresql.auto.conf</filename> file will record the connection
        settings and, if specified, the replication slot
        that <application>pg_basebackup</application> is using, so that
        streaming replication will use the same settings later on.
       </para>
________________________________________________________-->
       <para>
        <filename>postgresql.auto.conf</filename>文件将记录连接设置，以及如果指定的话，<application>pg_basebackup</application>正在使用的复制槽，
        以便后续流复制将使用相同的设置。
       </para>
<!-- pgdoc-cn_end sig_en=b8bf4e34a2192ddacdb987fbe669b9e3 -->

      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-t <replaceable class="parameter">target</replaceable></option></term>
      <term><option>--target=<replaceable class="parameter">target</replaceable></option></term>
      <listitem>

<!-- pgdoc-cn_start sig_en=4e650f2455a18aaa4157d089ae4d6654 sig_cn_org=81b01d32020533c9d60b154668d6546e source=15.7 
       <para>
        Instructs the server where to place the base backup. The default target
        is <literal>client</literal>, which specifies that the backup should
        be sent to the machine where <application>pg_basebackup</application>
        is running. If the target is instead set to
        <literal>server:/some/path</literal>, the backup will be stored on
        the machine where the server is running in the
        <literal>/some/path</literal> directory. Storing a backup on the
        server requires superuser privileges or having privileges of the
        <literal>pg_write_server_files</literal> role. If the target is set to
        <literal>blackhole</literal>, the contents are discarded and not
        stored anywhere. This should only be used for testing purposes, as you
        will not end up with an actual backup.
       </para>
________________________________________________________-->
       <para>
        指示服务器在哪里放置基本备份。默认目标是<literal>client</literal>，
        指定备份应发送到运行<application>pg_basebackup</application>的机器。
        如果目标设置为<literal>server:/some/path</literal>，备份将存储在运行服务器的机器上，
        在<literal>/some/path</literal>目录中。在服务器上存储备份需要超级用户权限或具有
        <literal>pg_write_server_files</literal>角色的权限。如果目标设置为
        <literal>blackhole</literal>，内容将被丢弃，不会存储在任何地方。这仅应用于测试目的，
        因为您不会得到实际备份。
       </para>
<!-- pgdoc-cn_end sig_en=4e650f2455a18aaa4157d089ae4d6654 -->

<!-- pgdoc-cn_start sig_en=e48281a83f44c4ba8488afd4e4f243a2 sig_cn_org=9c26f0422b10a8b262cfd7791c3fc22c source=15.7 
       <para>
        Since WAL streaming is implemented by
        <application>pg_basebackup</application> rather than by the server,
        this option cannot be used together with <literal>-Xstream</literal>.
        Since that is the default, when this option is specified, you must also
        specify either <literal>-Xfetch</literal> or <literal>-Xnone</literal>.
       </para>
________________________________________________________-->
       <para>
        由于WAL流式传输是由<application>pg_basebackup</application>而不是由服务器实现的，
        因此无法与<literal>-Xstream</literal>选项一起使用。
        由于这是默认设置，当指定此选项时，您还必须指定<literal>-Xfetch</literal>或<literal>-Xnone</literal>之一。
</para>
<!-- pgdoc-cn_end sig_en=e48281a83f44c4ba8488afd4e4f243a2 -->

      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-T <replaceable class="parameter">olddir</replaceable>=<replaceable class="parameter">newdir</replaceable></option></term>
      <term><option>--tablespace-mapping=<replaceable class="parameter">olddir</replaceable>=<replaceable class="parameter">newdir</replaceable></option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=7826a5bec9a438de793288f2c0deeaf1 sig_cn_org=0bc8cb2f71442afe106244caba8c7c5a source=15.7 
       <para>
        Relocates the tablespace in directory <replaceable>olddir</replaceable>
        to <replaceable>newdir</replaceable> during the backup.  To be
        effective, <replaceable>olddir</replaceable> must exactly match the
        path specification of the tablespace as it is defined on the source
        server.  (But it is not an error if there is no tablespace
        in <replaceable>olddir</replaceable> on the source server.)
        Meanwhile <replaceable>newdir</replaceable> is a directory in the
        receiving host's filesystem.  As with the main target directory,
        <replaceable>newdir</replaceable> need not exist already, but if
        it does exist it must be empty.
        Both <replaceable>olddir</replaceable>
        and <replaceable>newdir</replaceable> must be absolute paths.  If
        either path needs to contain an equal sign (<literal>=</literal>),
        precede that with a backslash.  This option can be specified multiple
        times for multiple tablespaces.
       </para>
________________________________________________________-->
       <para>
        将目录<replaceable>olddir</replaceable>中的表空间重新定位到<replaceable>newdir</replaceable>，
        在备份期间。为了生效，<replaceable>olddir</replaceable>必须与源服务器上表空间的路径规范完全匹配。
        （但如果源服务器上<replaceable>olddir</replaceable>中没有表空间，这并不是一个错误。）
        与此同时，<replaceable>newdir</replaceable>是接收主机文件系统中的一个目录。
        与主目标目录一样，<replaceable>newdir</replaceable>不必已经存在，但如果存在，必须为空。
        <replaceable>olddir</replaceable>和<replaceable>newdir</replaceable>都必须是绝对路径。
        如果任一路径需要包含等号（<literal>=</literal>），请在等号前加上反斜杠。
        可以多次指定此选项以备份多个表空间。
       </para>
<!-- pgdoc-cn_end sig_en=7826a5bec9a438de793288f2c0deeaf1 -->

<!-- pgdoc-cn_start sig_en=aec2619189257a77dc56041caa1a2507 sig_cn_org=144a98538f3a38abade9a91b2dae93da source=15.7 
       <para>
        If a tablespace is relocated in this way, the symbolic links inside
        the main data directory are updated to point to the new location.  So
        the new data directory is ready to be used for a new server instance
        with all tablespaces in the updated locations.
       </para>
________________________________________________________-->
       <para>
        如果以这种方式重新定位表空间，则主数据目录中的符号链接将被更新，指向新位置。
        因此，新数据目录已准备好用于具有所有表空间在更新位置的新服务器实例。
       </para>
<!-- pgdoc-cn_end sig_en=aec2619189257a77dc56041caa1a2507 -->

<!-- pgdoc-cn_start sig_en=3c362395f480fb39db74132101a56add sig_cn_org=d65a035f4e7625d3828edb0b273dafe2 source=15.7 
       <para>
        Currently, this option only works with plain output format; it is
        ignored if tar format is selected.
       </para>
________________________________________________________-->
       <para>
        目前，此选项仅适用于普通输出格式；如果选择了tar格式，则会被忽略。
       </para>
<!-- pgdoc-cn_end sig_en=3c362395f480fb39db74132101a56add -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--waldir=<replaceable class="parameter">waldir</replaceable></option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=a45a577b89f083867ca37f99aa65b2e2 sig_cn_org=0df1c18dd4760469c0a15b70be65bebb source=15.7 
       <para>
        Sets the directory to write WAL (write-ahead log) files to.
        By default WAL files will be placed in
        the <filename>pg_wal</filename> subdirectory of the target
        directory, but this option can be used to place them elsewhere.
        <replaceable>waldir</replaceable> must be an absolute path.
        As with the main target directory,
        <replaceable>waldir</replaceable> need not exist already, but if
        it does exist it must be empty.
        This option can only be specified when
        the backup is in plain format.
       </para>
________________________________________________________-->
       <para>
        设置写入WAL（预写式日志）文件的目录。
        默认情况下，WAL文件将被放置在目标目录的<filename>pg_wal</filename>子目录中，
        但可以使用此选项将它们放置在其他位置。
        <replaceable>waldir</replaceable>必须是绝对路径。
        与主目标目录一样，<replaceable>waldir</replaceable>不必已经存在，
        但如果存在，必须为空。
        只有在备份为纯文本格式时才能指定此选项。
       </para>
<!-- pgdoc-cn_end sig_en=a45a577b89f083867ca37f99aa65b2e2 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-X <replaceable class="parameter">method</replaceable></option></term>
      <term><option>--wal-method=<replaceable class="parameter">method</replaceable></option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=1fe4312dee0bc7e64be6c7d4db15c1cf sig_cn_org=d5518cf0a4ca546a53d19e803acf6d1b source=15.7 
       <para>
        Includes the required WAL (write-ahead log) files in the
        backup. This will include all write-ahead logs generated during
        the backup. Unless the method <literal>none</literal> is specified,
        it is possible to start a postmaster in the target
        directory without the need to consult the log archive, thus
        making the output a completely standalone backup.
       </para>
________________________________________________________-->
       <para>
        在备份中包括必需的WAL（预写式日志）文件。这将包括备份期间生成的所有预写式日志。
        除非指定了方法<literal>none</literal>，否则可以在目标目录中启动一个postmaster，而无需查阅日志归档，从而使输出成为一个完全独立的备份。
       </para>
<!-- pgdoc-cn_end sig_en=1fe4312dee0bc7e64be6c7d4db15c1cf -->
<!-- pgdoc-cn_start sig_en=f2c58ac29fd290b4c3dcafa519e0b5ab sig_cn_org=7b3b2e5c20a3f4399988d72273f474cd source=15.7 
       <para>
        The following <replaceable>method</replaceable>s for collecting the
        write-ahead logs are supported:

        <variablelist>
         <varlistentry>
          <term><literal>n</literal></term>
          <term><literal>none</literal></term>
          <listitem>
           <para>
            Don't include write-ahead logs in the backup.
           </para>
          </listitem>
         </varlistentry>

         <varlistentry>
          <term><literal>f</literal></term>
          <term><literal>fetch</literal></term>
          <listitem>
           <para>
            The write-ahead log files are collected at the end of the backup.
            Therefore, it is necessary for the source server's
            <xref linkend="guc-wal-keep-size"/> parameter to be set high
            enough that the required log data is not removed before the end
            of the backup.  If the required log data has been recycled
            before it's time to transfer it, the backup will fail and be
            unusable.
           </para>
           <para>
            When tar format is used, the write-ahead log files will be
            included in the <filename>base.tar</filename> file.
           </para>
          </listitem>
         </varlistentry>

         <varlistentry>
          <term><literal>s</literal></term>
          <term><literal>stream</literal></term>
          <listitem>
           <para>
            Stream write-ahead log data while the backup is being taken.
            This method will open a second connection to the server and
            start streaming the write-ahead log in parallel while running
            the backup.  Therefore, it will require two replication
            connections not just one.  As long as the client can keep up
            with the write-ahead log data, using this method requires no
            extra write-ahead logs to be saved on the source server.
           </para>
           <para>
            When tar format is used, the write-ahead log files will be
            written to a separate file named <filename>pg_wal.tar</filename>
            (if the server is a version earlier than 10, the file will be named
            <filename>pg_xlog.tar</filename>).
           </para>
           <para>
            This value is the default.
           </para>
          </listitem>
         </varlistentry>
        </variablelist></para>
________________________________________________________-->
       <para>
        支持以下用于收集预写式日志的<replaceable>方法</replaceable>：

        <variablelist>
         <varlistentry>
          <term><literal>n</literal></term>
          <term><literal>none</literal></term>
          <listitem>
           <para>
            不在备份中包含预写式日志。
           </para>
          </listitem>
         </varlistentry>

         <varlistentry>
          <term><literal>f</literal></term>
          <term><literal>fetch</literal></term>
          <listitem>
           <para>
            在备份结束时收集预写式日志文件。因此，源服务器的
            <xref linkend="guc-wal-keep-size"/>参数需要设置得足够高，
            以确保在备份结束前不会删除所需的日志数据。如果所需的日志数据
            在传输之前被回收，备份将失败且无法使用。
           </para>
           <para>
            当使用tar格式时，预写式日志文件将包含在<filename>base.tar</filename>文件中。
           </para>
          </listitem>
         </varlistentry>

         <varlistentry>
          <term><literal>s</literal></term>
          <term><literal>stream</literal></term>
          <listitem>
           <para>
            在进行备份时流式传输预写式日志数据。此方法将在服务器上打开第二个连接，
            并在运行备份时并行流式传输预写式日志。因此，它将需要两个复制连接而不仅仅一个。
            只要客户端能够跟上预写式日志数据，使用此方法不需要在源服务器上保存额外的预写式日志。
           </para>
           <para>
            当使用tar格式时，预写式日志文件将被写入一个名为<filename>pg_wal.tar</filename>的单独文件
            （如果服务器版本早于10，则文件将被命名为<filename>pg_xlog.tar</filename>）。
           </para>
           <para>
            这个值是默认值。
           </para>
          </listitem>
         </varlistentry>
        </variablelist>
</para>
<!-- pgdoc-cn_end sig_en=f2c58ac29fd290b4c3dcafa519e0b5ab -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-z</option></term>
      <term><option>--gzip</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=348e114218df4fcc41d02d708563d166 sig_cn_org=99b199250084420561fd39645a12df23 source=15.7 
       <para>
        Enables gzip compression of tar file output, with the default
        compression level. Compression is only available when using
        the tar format, and the suffix <filename>.gz</filename> will
        automatically be added to all tar filenames.
       </para>
________________________________________________________-->
       <para>
        启用tar文件输出的gzip压缩，默认压缩级别。仅在使用tar格式时才可用压缩，
        并且所有tar文件名将自动添加后缀<filename>.gz</filename>。
       </para>
<!-- pgdoc-cn_end sig_en=348e114218df4fcc41d02d708563d166 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-Z <replaceable class="parameter">level</replaceable></option></term>
      <term><option>-Z [{client|server}-]<replaceable class="parameter">method</replaceable>[:<replaceable>detail</replaceable>]</option></term>
      <term><option>--compress=<replaceable class="parameter">level</replaceable></option></term>
      <term><option>--compress=[{client|server}-]<replaceable class="parameter">method</replaceable>[:<replaceable>detail</replaceable>]</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=05de31685dc41de3dc16e0403ef6aa9c sig_cn_org=80c804d87dea585cdc9a083a75c22dd1 source=15.7 
       <para>
        Requests compression of the backup. If <literal>client</literal> or
        <literal>server</literal> is included, it specifies where the
        compression is to be performed. Compressing on the server will reduce
        transfer bandwidth but will increase server CPU consumption.  The
        default is <literal>client</literal> except when
        <literal>-&minus;target</literal> is used. In that case, the backup is not
        being sent to the client, so only server compression is sensible.
        When <literal>-Xstream</literal>, which is the default, is used,
        server-side compression will not be applied to the WAL. To compress
        the WAL, use client-side compression, or
        specify <literal>-Xfetch</literal>.
       </para>
________________________________________________________-->
       <para>
        请求对备份进行压缩。如果包括<literal>client</literal>或
        <literal>server</literal>，则指定在哪里执行压缩。在服务器上进行压缩将减少
        传输带宽，但会增加服务器的CPU消耗。默认情况下是<literal>client</literal>，除非使用
        <literal>--target</literal>。在这种情况下，备份不会发送到客户端，因此只有服务器端压缩是明智的。
        当使用默认的<literal>-Xstream</literal>时，服务器端压缩不会应用于WAL。要压缩
        WAL，使用客户端端压缩，或者指定<literal>-Xfetch</literal>。
       </para>
<!-- pgdoc-cn_end sig_en=05de31685dc41de3dc16e0403ef6aa9c -->
<!-- pgdoc-cn_start sig_en=3d47af602e0a0dcefeeb589c08b1079e sig_cn_org=40d73880f0b46c499407ecfd947e3e29 source=15.7 
       <para>
        The compression method can be set to <literal>gzip</literal>,
        <literal>lz4</literal>, <literal>zstd</literal>, or
        <literal>none</literal> for no compression. A compression detail
        string can optionally be specified.  If the detail string is an
        integer, it specifies the compression level.  Otherwise, it should be
        a comma-separated list of items, each of the form
        <literal>keyword</literal> or <literal>keyword=value</literal>.
        Currently, the supported keywords are <literal>level</literal>
        and <literal>workers</literal>.
       </para>
________________________________________________________-->
       <para>
        压缩方法可以设置为<literal>gzip</literal>、<literal>lz4</literal>、<literal>zstd</literal>或<literal>none</literal>以进行无压缩。
        可以选择性地指定压缩详细信息字符串。如果详细信息字符串是一个整数，则它指定了压缩级别。
        否则，它应该是一个逗号分隔的项目列表，每个项目的形式为<literal>keyword</literal>或<literal>keyword=value</literal>。
        目前，支持的关键字是<literal>level</literal>和<literal>workers</literal>。
       </para>
<!-- pgdoc-cn_end sig_en=3d47af602e0a0dcefeeb589c08b1079e -->
<!-- pgdoc-cn_start sig_en=22b8b6f8f05cbbf2486d925993fa2afd sig_cn_org=8bacfb1745c656e4f2912f82df539dc0 source=15.7 
       <para>
        If no compression level is specified, the default compression level
        will be used. If only a level is specified without mentioning an
        algorithm, <literal>gzip</literal> compression will be used if the
        level is greater than 0, and no compression will be used if the level
        is 0.
       </para>
________________________________________________________-->
       <para>
        如果未指定压缩级别，则将使用默认压缩级别。如果只指定了级别而没有提及算法，
        则如果级别大于0，将使用<literal>gzip</literal>压缩，如果级别为0，则不使用压缩。
       </para>
<!-- pgdoc-cn_end sig_en=22b8b6f8f05cbbf2486d925993fa2afd -->
<!-- pgdoc-cn_start sig_en=f2c4c516a3a1354a27d6257b5ae3aaef sig_cn_org=488e108cca325a2f18b62a719b26d3c3 source=15.7 
       <para>
        When the tar format is used with <literal>gzip</literal>,
        <literal>lz4</literal>, or <literal>zstd</literal>, the suffix
        <filename>.gz</filename>, <filename>.lz4</filename>, or
        <filename>.zst</filename>, respectively, will be automatically added to
        all tar filenames. When the plain format is used, client-side
        compression may not be specified, but it is still possible to request
        server-side compression. If this is done, the server will compress the
        backup for transmission, and the client will decompress and extract it.
       </para>
________________________________________________________-->
       <para>
        当使用<literal>gzip</literal>、<literal>lz4</literal>或<literal>zstd</literal>格式时，
        分别会自动将后缀<filename>.gz</filename>、<filename>.lz4</filename>或
        <filename>.zst</filename>添加到所有tar文件名中。当使用普通格式时，
        客户端不可指定压缩，但仍可以请求服务器端压缩。如果这样做，
        服务器将压缩备份以进行传输，客户端将解压缩并提取它。
       </para>
<!-- pgdoc-cn_end sig_en=f2c4c516a3a1354a27d6257b5ae3aaef -->
<!-- pgdoc-cn_start sig_en=a6359f304d39ba248d76b3a5df2885d2 sig_cn_org=b0974449495a0a59bb5c02113e092e1c source=15.7 
       <para>
        When this option is used in combination with
        <literal>-Xstream</literal>, <literal>pg_wal.tar</literal> will
        be compressed using <literal>gzip</literal> if client-side gzip
        compression is selected, but will not be compressed if any other
        compression algorithm is selected, or if server-side compression
        is selected.
       </para>
________________________________________________________-->
       <para>
        当此选项与<literal>-Xstream</literal>结合使用时，如果选择了客户端gzip压缩，
        <literal>pg_wal.tar</literal>将使用<literal>gzip</literal>进行压缩，但如果选择了其他
        压缩算法，或者选择了服务器端压缩，则不会进行压缩。
       </para>
<!-- pgdoc-cn_end sig_en=a6359f304d39ba248d76b3a5df2885d2 -->
      </listitem>
     </varlistentry>
    </variablelist>
   </para>
<!-- pgdoc-cn_start sig_en=f8c9e7e7c6aa937497a3e68b5ef628bb sig_cn_org=f2b84263ccb8678e621ac2e35bd7b8ff source=15.7 
   <para>
    The following command-line options control the generation of the
    backup and the invocation of the program:

    <variablelist>
     <varlistentry>
________________________________________________________-->
   <para>
    以下命令行选项控制备份的生成和程序的调用：

    <variablelist>
     <varlistentry>
<!-- pgdoc-cn_end sig_en=f8c9e7e7c6aa937497a3e68b5ef628bb -->
      <term><option>-c {fast|spread}</option></term>
      <term><option>--checkpoint={fast|spread}</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=7b4f6307ad2e814cf80823eefd360473 sig_cn_org=5cd237ad0f8b6eaa3259f4da10b6b5df source=15.7 
       <para>
        Sets checkpoint mode to fast (immediate) or spread (the default)
        (see <xref linkend="backup-lowlevel-base-backup"/>).
       </para>
________________________________________________________-->
       <para>
        将检查点模式设置为快速（即时）或扩散（默认）
        （参见<xref linkend="backup-lowlevel-base-backup"/>）。
       </para>
<!-- pgdoc-cn_end sig_en=7b4f6307ad2e814cf80823eefd360473 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-C</option></term>
      <term><option>--create-slot</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=e7feb3cc810aad7835ce8c279d678319 sig_cn_org=d64a8bdef679b2238dd43b852132bc27 source=15.7 
       <para>
        Specifies that the replication slot named by the
        <literal>-&minus;slot</literal> option should be created before starting
        the backup.  An error is raised if the slot already exists.
       </para>
________________________________________________________-->
       <para>
        指定在开始备份之前应创建由<literal>--slot</literal>选项命名的复制槽。
        如果槽已经存在，则会引发错误。
       </para>
<!-- pgdoc-cn_end sig_en=e7feb3cc810aad7835ce8c279d678319 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-l <replaceable class="parameter">label</replaceable></option></term>
      <term><option>--label=<replaceable class="parameter">label</replaceable></option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=17915fe9ff3ac5ec7fb601dc96af45eb sig_cn_org=1c21fca0d097c55466c577da0df8cfa8 source=15.7 
       <para>
        Sets the label for the backup. If none is specified, a default value of
        <quote><literal>pg_basebackup base backup</literal></quote> will be used.
       </para>
________________________________________________________-->
       <para>
        设置备份的标签。如果未指定任何标签，则将使用默认值<quote><literal>pg_basebackup基本备份</literal></quote>。
       </para>
<!-- pgdoc-cn_end sig_en=17915fe9ff3ac5ec7fb601dc96af45eb -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-n</option></term>
      <term><option>--no-clean</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=56ef8e90b58e82faf9f66bdb8c47e5f2 sig_cn_org=e74047c87ea67d9279abe140de908f42 source=15.7 
       <para>
        By default, when <command>pg_basebackup</command> aborts with an
        error, it removes any directories it might have created before
        discovering that it cannot finish the job (for example, the target
        directory and write-ahead log directory). This option inhibits
        tidying-up and is thus useful for debugging.
       </para>
________________________________________________________-->
       <para>
        默认情况下，当<command>pg_basebackup</command>因错误而中止时，
        它会删除在发现无法完成任务之前可能创建的任何目录（例如，目标目录和预写式日志目录）。
        此选项会禁止整理，因此对于调试很有用。
       </para>
<!-- pgdoc-cn_end sig_en=56ef8e90b58e82faf9f66bdb8c47e5f2 -->

<!-- pgdoc-cn_start sig_en=0c6e08c8763589b31f480ffce4a99cac sig_cn_org=0f422b1f4292a3248e1bd93abb488369 source=15.7 
       <para>
        Note that tablespace directories are not cleaned up either way.
       </para>
________________________________________________________-->
       <para>
        请注意，表空间目录也不会被清理。
       </para>
<!-- pgdoc-cn_end sig_en=0c6e08c8763589b31f480ffce4a99cac -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-N</option></term>
      <term><option>--no-sync</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=8b452da4e5da4cb986f998a640fc71e5 sig_cn_org=ce7efb218d62af01c800b95d8b3f186b source=15.7 
       <para>
        By default, <command>pg_basebackup</command> will wait for all files
        to be written safely to disk.  This option causes
        <command>pg_basebackup</command> to return without waiting, which is
        faster, but means that a subsequent operating system crash can leave
        the base backup corrupt.  Generally, this option is useful for testing
        but should not be used when creating a production installation.
       </para>
________________________________________________________-->
       <para>
        默认情况下，<command>pg_basebackup</command>会等待所有文件被安全地写入磁盘。
        此选项导致<command>pg_basebackup</command>在不等待的情况下返回，这样更快，
        但意味着随后的操作系统崩溃可能会导致基本备份损坏。通常，此选项在测试时很有用，
        但在创建生产安装时不应使用。
       </para>
<!-- pgdoc-cn_end sig_en=8b452da4e5da4cb986f998a640fc71e5 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-P</option></term>
      <term><option>--progress</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=19080ff35f5fb4d87761dd5577bdc746 sig_cn_org=228d2077fe311359877699d3848a9f04 source=15.7 
       <para>
        Enables progress reporting. Turning this on will deliver an approximate
        progress report during the backup. Since the database may change during
        the backup, this is only an approximation and may not end at exactly
        <literal>100%</literal>. In particular, when WAL log is included in the
        backup, the total amount of data cannot be estimated in advance, and
        in this case the estimated target size will increase once it passes the
        total estimate without WAL.
       </para>
________________________________________________________-->
       <para>
        启用进度报告。打开此选项将在备份过程中提供一个大致的进度报告。由于备份过程中数据库可能会发生变化，因此这只是一个近似值，可能不会准确到<literal>100%</literal>。特别是当WAL日志包含在备份中时，无法提前估计总数据量，在这种情况下，一旦超过总估计值而没有WAL，估计的目标大小将会增加。
       </para>
<!-- pgdoc-cn_end sig_en=19080ff35f5fb4d87761dd5577bdc746 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-r <replaceable class="parameter">rate</replaceable></option></term>
      <term><option>--max-rate=<replaceable class="parameter">rate</replaceable></option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=3260d2739dca265f6722591c68a1a7ae sig_cn_org=48c0a6c33e7ba5beba638115ff678e61 source=15.7 
       <para>
        Sets the maximum transfer rate at which data is collected from the
        source server.  This can be useful to limit the impact
        of <application>pg_basebackup</application> on the server.  Values
        are in kilobytes per second.  Use a suffix of <literal>M</literal>
        to indicate megabytes per second.  A suffix of <literal>k</literal>
        is also accepted, and has no effect.  Valid values are between 32
        kilobytes per second and 1024 megabytes per second.
       </para>
________________________________________________________-->
       <para>
        设置从源服务器收集数据的最大传输速率。这对于限制<application>pg_basebackup</application>对服务器的影响很有用。
        值以每秒千字节为单位。使用后缀<literal>M</literal>表示每秒兆字节。也接受后缀<literal>k</literal>，但没有影响。
        有效值介于每秒32千字节和每秒1024兆字节之间。
       </para>
<!-- pgdoc-cn_end sig_en=3260d2739dca265f6722591c68a1a7ae -->
<!-- pgdoc-cn_start sig_en=5b76cd3cdec13c4ee62c4b28a041900f sig_cn_org=ab79da8004951203a85a002a10de632b source=15.7 
       <para>
        This option always affects transfer of the data directory. Transfer of
        WAL files is only affected if the collection method
        is <literal>fetch</literal>.
       </para>
________________________________________________________-->
       <para>
        这个选项总是影响数据目录的传输。只有在收集方法是<literal>fetch</literal>时，WAL文件的传输才会受到影响。
       </para>
<!-- pgdoc-cn_end sig_en=5b76cd3cdec13c4ee62c4b28a041900f -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-S <replaceable>slotname</replaceable></option></term>
      <term><option>--slot=<replaceable class="parameter">slotname</replaceable></option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=baa9c72e8bf63f67c0fb7ab431deffa0 sig_cn_org=5c571f4de93ad422ab1909b119afbce0 source=15.7 
       <para>
        This option can only be used together with <literal>-X
        stream</literal>.  It causes WAL streaming to use the specified
        replication slot.  If the base backup is intended to be used as a
        streaming-replication standby using a replication slot, the standby
        should then use the same replication slot name as
        <xref linkend="guc-primary-slot-name"/>.  This ensures that the
        primary server does not remove any necessary WAL data in the time
        between the end of the base backup and the start of streaming
        replication on the new standby.
       </para>
________________________________________________________-->
       <para>
        这个选项只能与<literal>-X stream</literal>一起使用。它导致WAL流使用指定的复制槽。
        如果基本备份打算用作使用复制槽的流复制备用，那么备用应该使用与
        <xref linkend="guc-primary-slot-name"/>相同的复制槽名称。这确保主服务器在基本备份结束和新备用开始流复制之间的时间内不会删除任何必要的WAL数据。
       </para>
<!-- pgdoc-cn_end sig_en=baa9c72e8bf63f67c0fb7ab431deffa0 -->
<!-- pgdoc-cn_start sig_en=3eb0ecf31c04a6950cc185819586c947 sig_cn_org=6ee6e258951f6e1bba7c88c94df92d51 source=15.7 
       <para>
        The specified replication slot has to exist unless the
        option <option>-C</option> is also used.
       </para>
________________________________________________________-->
       <para>
        指定的复制槽必须存在，除非还使用了选项<option>-C</option>。
       </para>
<!-- pgdoc-cn_end sig_en=3eb0ecf31c04a6950cc185819586c947 -->
<!-- pgdoc-cn_start sig_en=02f36b61aae0be67949a9ce3115bedc7 sig_cn_org=f6edddab9349151138f9d9ebddee95fe source=15.7 
       <para>
        If this option is not specified and the server supports temporary
        replication slots (version 10 and later), then a temporary replication
        slot is automatically used for WAL streaming.
       </para>
________________________________________________________-->
       <para>
        如果未指定此选项，并且服务器支持临时复制槽（版本10及更高版本），则自动使用临时复制槽进行WAL流式传输。
       </para>
<!-- pgdoc-cn_end sig_en=02f36b61aae0be67949a9ce3115bedc7 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-v</option></term>
      <term><option>--verbose</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=28f100d737b95b89b61c4d48c3a6a0d0 sig_cn_org=5b66ddd4fcb15232b12302364e8f4690 source=15.7 
       <para>
        Enables verbose mode. Will output some extra steps during startup and
        shutdown, as well as show the exact file name that is currently being
        processed if progress reporting is also enabled.
       </para>
________________________________________________________-->
       <para>
        启用详细模式。在启动和关闭过程中输出一些额外步骤，以及在启用进度报告的情况下显示当前正在处理的确切文件名。
       </para>
<!-- pgdoc-cn_end sig_en=28f100d737b95b89b61c4d48c3a6a0d0 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--manifest-checksums=<replaceable class="parameter">algorithm</replaceable></option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=af6bb9da059cffc158b68e4fd69e7742 sig_cn_org=5bb4a8b1529b3f7bb3281d0b99c2a8dc source=15.7 
       <para>
        Specifies the checksum algorithm that should be applied to each file
        included in the backup manifest. Currently, the available
        algorithms are <literal>NONE</literal>, <literal>CRC32C</literal>,
        <literal>SHA224</literal>, <literal>SHA256</literal>,
        <literal>SHA384</literal>, and <literal>SHA512</literal>.
        The default is <literal>CRC32C</literal>.
       </para>
________________________________________________________-->
       <para>
        指定应用于备份清单中包含的每个文件的校验和算法。
        目前，可用的算法有<literal>NONE</literal>、<literal>CRC32C</literal>、
        <literal>SHA224</literal>、<literal>SHA256</literal>、
        <literal>SHA384</literal>和<literal>SHA512</literal>。
        默认值为<literal>CRC32C</literal>。
       </para>
<!-- pgdoc-cn_end sig_en=af6bb9da059cffc158b68e4fd69e7742 -->
<!-- pgdoc-cn_start sig_en=c06adfe82c090f1ac58b5a25c10d5a52 sig_cn_org=33bd59a2dd8b7aa1ebf2722ea0f7e89f source=15.7 
       <para>
        If <literal>NONE</literal> is selected, the backup manifest will
        not contain any checksums. Otherwise, it will contain a checksum
        of each file in the backup using the specified algorithm. In addition,
        the manifest will always contain a <literal>SHA256</literal>
        checksum of its own contents. The <literal>SHA</literal> algorithms
        are significantly more CPU-intensive than <literal>CRC32C</literal>,
        so selecting one of them may increase the time required to complete
        the backup.
       </para>
________________________________________________________-->
       <para>
        如果选择<literal>NONE</literal>，备份清单将不包含任何校验和。否则，它将包含使用指定算法对备份中每个文件的校验和。
        此外，清单将始终包含自身内容的<literal>SHA256</literal>校验和。<literal>SHA</literal>算法比<literal>CRC32C</literal>更耗费CPU资源，
        因此选择其中之一可能会增加完成备份所需的时间。
       </para>
<!-- pgdoc-cn_end sig_en=c06adfe82c090f1ac58b5a25c10d5a52 -->
<!-- pgdoc-cn_start sig_en=6d50072d982ac730f804df2055dd95f6 sig_cn_org=a148441f80e0648fa95311e4335d09c8 source=15.7 
       <para>
        Using a SHA hash function provides a cryptographically secure digest
        of each file for users who wish to verify that the backup has not been
        tampered with, while the CRC32C algorithm provides a checksum that is
        much faster to calculate; it is good at catching errors due to accidental
        changes but is not resistant to malicious modifications.  Note that, to
        be useful against an adversary who has access to the backup, the backup
        manifest would need to be stored securely elsewhere or otherwise
        verified not to have been modified since the backup was taken.
       </para>
________________________________________________________-->
       <para>
        使用SHA哈希函数为希望验证备份文件未被篡改的用户提供了每个文件的加密安全摘要，
        而CRC32C算法提供了一个计算速度更快的校验和；它擅长捕捉由于意外更改而导致的错误，
        但不抵抗恶意修改。请注意，为了对抗能够访问备份的对手，备份清单需要安全地存储在其他地方，
        或者以其他方式验证自备份后未被修改。
       </para>
<!-- pgdoc-cn_end sig_en=6d50072d982ac730f804df2055dd95f6 -->
<!-- pgdoc-cn_start sig_en=8813c812a6f06bac21b705290aabb069 sig_cn_org=0a87fe98c96236bf744673cc7355d7cc source=15.7 
       <para>
        <xref linkend="app-pgverifybackup"/> can be used to check the
        integrity of a backup against the backup manifest.
       </para>
________________________________________________________-->
       <para>
        <xref linkend="app-pgverifybackup"/>可以用来检查备份与备份清单的完整性。
       </para>
<!-- pgdoc-cn_end sig_en=8813c812a6f06bac21b705290aabb069 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--manifest-force-encode</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=571f3e0b8eddad2d686abfc7e6f2d8d9 sig_cn_org=8c761486d417ed5b8209e022e45e60ad source=15.7 
       <para>
        Forces all filenames in the backup manifest to be hex-encoded.
        If this option is not specified, only non-UTF8 filenames are
        hex-encoded. This option is mostly intended to test that tools which
        read a backup manifest file properly handle this case.
       </para>
________________________________________________________-->
       <para>
        强制备份清单中的所有文件名都进行十六进制编码。
        如果未指定此选项，则仅对非UTF8文件名进行十六进制编码。
        此选项主要用于测试读取备份清单文件的工具是否正确处理此情况。
       </para>
<!-- pgdoc-cn_end sig_en=571f3e0b8eddad2d686abfc7e6f2d8d9 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--no-estimate-size</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=b9b33fc12a92ca745755612e3e83652a sig_cn_org=facf7ecbd862f0620105f18fe1a53f15 source=15.7 
       <para>
        Prevents the server from estimating the total
        amount of backup data that will be streamed, resulting in the
        <structfield>backup_total</structfield> column in the
        <structname>pg_stat_progress_basebackup</structname> view
        always being <literal>NULL</literal>.
       </para>
________________________________________________________-->
       <para>
        防止服务器估计将流式传输的备份数据总量，导致<structfield>backup_total</structfield>列在<structname>pg_stat_progress_basebackup</structname>视图中始终为<literal>NULL</literal>。
       </para>
<!-- pgdoc-cn_end sig_en=b9b33fc12a92ca745755612e3e83652a -->
<!-- pgdoc-cn_start sig_en=ac1a3d879a8a1faa63c395a7a7bde5d7 sig_cn_org=efec067bb0a7d1411a439a48f8017a54 source=15.7 
       <para>
        Without this option, the backup will start by enumerating
        the size of the entire database, and then go back and send
        the actual contents. This may make the backup take slightly
        longer, and in particular it will take longer before the first
        data is sent. This option is useful to avoid such estimation
        time if it's too long.
       </para>
________________________________________________________-->
       <para>
        没有这个选项，备份将从枚举整个数据库的大小开始，然后返回并发送实际内容。
        这可能会使备份花费稍微更长的时间，特别是在发送第一个数据之前会花费更长的时间。
        如果估计时间太长，这个选项是有用的，可以避免这种估计时间。
       </para>
<!-- pgdoc-cn_end sig_en=ac1a3d879a8a1faa63c395a7a7bde5d7 -->
<!-- pgdoc-cn_start sig_en=c258f0f76dd96ac8e07982b35af930b6 sig_cn_org=a709019242af113f036b5f58d22d624c source=15.7 
       <para>
        This option is not allowed when using <option>-&minus;progress</option>.
       </para>
________________________________________________________-->
       <para>
        当使用<option>--progress</option>选项时，不允许使用此选项。
       </para>
<!-- pgdoc-cn_end sig_en=c258f0f76dd96ac8e07982b35af930b6 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--no-manifest</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=f52fc5df72b043af0bb60c33fc63e9e1 sig_cn_org=4cf9883a0f2196490ed12090bd89c02a source=15.7 
       <para>
        Disables generation of a backup manifest. If this option is not
        specified, the server will generate and send a backup manifest
        which can be verified using <xref linkend="app-pgverifybackup"/>.
        The manifest is a list of every file present in the backup with the
        exception of any WAL files that may be included. It also stores the
        size, last modification time, and an optional checksum for each file.
       </para>
________________________________________________________-->
       <para>
        禁用备份清单的生成。如果未指定此选项，服务器将生成并发送一个备份清单，
        可以使用<xref linkend="app-pgverifybackup"/>进行验证。清单是备份中
        每个文件的列表，除了可能包含的任何WAL文件。它还存储每个文件的大小、
        最后修改时间以及可选的校验和。
       </para>
<!-- pgdoc-cn_end sig_en=f52fc5df72b043af0bb60c33fc63e9e1 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--no-slot</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=0578692a01b1083c2323382285555d51 sig_cn_org=07f8c37c8c37d40e23c9b3df1465e837 source=15.7 
       <para>
        Prevents the creation of a temporary replication slot
        for the backup.
       </para>
________________________________________________________-->
       <para>
        防止为备份创建临时复制插槽。
       </para>
<!-- pgdoc-cn_end sig_en=0578692a01b1083c2323382285555d51 -->
<!-- pgdoc-cn_start sig_en=7a4c868f742780b21ea0c41f74fd63f1 sig_cn_org=e96fabad69428a228cbcf3d7ff8dfe99 source=15.7 
       <para>
        By default, if log streaming is selected but no slot name is given
        with the <option>-S</option> option, then a temporary replication
        slot is created (if supported by the source server).
       </para>
________________________________________________________-->
       <para>
        默认情况下，如果选择了日志流但没有使用<option>-S</option>选项指定槽名，
        那么将创建一个临时复制槽（如果源服务器支持）。
       </para>
<!-- pgdoc-cn_end sig_en=7a4c868f742780b21ea0c41f74fd63f1 -->
<!-- pgdoc-cn_start sig_en=2cebbd544cef573885d8545ca799c888 sig_cn_org=070815ebfae20d19b6c4176ce63d7e53 source=15.7 
       <para>
        The main purpose of this option is to allow taking a base backup when
        the server has no free replication slots.  Using a replication slot
        is almost always preferred, because it prevents needed WAL from being
        removed by the server during the backup.
       </para>
________________________________________________________-->
       <para>
        这个选项的主要目的是在服务器没有空闲的复制插槽时允许进行基本备份。几乎总是
        更倾向于使用复制插槽，因为它可以防止备份期间服务器删除所需的WAL日志。
       </para>
<!-- pgdoc-cn_end sig_en=2cebbd544cef573885d8545ca799c888 -->
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>--no-verify-checksums</option></term>
      <listitem>
<!-- pgdoc-cn_start sig_en=e51bc5509fb72d2c172af9cacc0cadaa sig_cn_org=58e33166c913b98822952eabaca4993b source=15.7 
       <para>
        Disables verification of checksums, if they are enabled on the server
        the base backup is taken from.
       </para>
________________________________________________________-->
       <para>
        禁用校验和的验证，如果在服务器上启用了校验和，则从中获取基本备份。
       </para>
<!-- pgdoc-cn_end sig_en=e51bc5509fb72d2c172af9cacc0cadaa -->
<!-- pgdoc-cn_start sig_en=f3ccf589e0424f39919b01fdf77a108e sig_cn_org=77bfd9f7a2d719e2aaffef19bfdd4487 source=15.7 
       <para>
        By default, checksums are verified and checksum failures will result
        in a non-zero exit status. However, the base backup will not be
        removed in such a case, as if the <option>-&minus;no-clean</option> option
        had been used.  Checksum verification failures will also be reported
        in the <link linkend="monitoring-pg-stat-database-view">
        <structname>pg_stat_database</structname></link> view.
       </para>
________________________________________________________-->
       <para>
        默认情况下，将验证校验和，校验和失败将导致非零退出状态。但是，在这种情况下，基本备份不会被删除，就好像使用了
        <option>--no-clean</option>选项一样。校验和验证失败也将在
        <link linkend="monitoring-pg-stat-database-view">
        <structname>pg_stat_database</structname></link>视图中报告。
       </para>
<!-- pgdoc-cn_end sig_en=f3ccf589e0424f39919b01fdf77a108e -->
      </listitem>
     </varlistentry>
    </variablelist>
   </para>

<!-- pgdoc-cn_start sig_en=b988e82b9900ccabe5031d740fa0b946 sig_cn_org=None source=14.1 
   <para>
    The following command-line options control the connection to the source
    server:

    <variablelist>
     <varlistentry>
      <term><option>-d <replaceable class="parameter">connstr</replaceable></option></term>
      <term><option>-&minus;dbname=<replaceable class="parameter">connstr</replaceable></option></term>
      <listitem>
       <para>
        Specifies parameters used to connect to the server, as a <link
        linkend="libpq-connstring">connection string</link>;  these
        will override any conflicting command line options.
       </para>
       <para>
        The option is called <literal>-&minus;dbname</literal> for consistency with other
        client applications, but because <application>pg_basebackup</application>
        doesn't connect to any particular database in the cluster, any database
        name in the connection string will be ignored.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-h <replaceable class="parameter">host</replaceable></option></term>
      <term><option>-&minus;host=<replaceable class="parameter">host</replaceable></option></term>
      <listitem>
       <para>
        Specifies the host name of the machine on which the server is
        running.  If the value begins with a slash, it is used as the
        directory for a Unix domain socket. The default is taken
        from the <envar>PGHOST</envar> environment variable, if set,
        else a Unix domain socket connection is attempted.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-p <replaceable class="parameter">port</replaceable></option></term>
      <term><option>-&minus;port=<replaceable class="parameter">port</replaceable></option></term>
      <listitem>
       <para>
        Specifies the TCP port or local Unix domain socket file
        extension on which the server is listening for connections.
        Defaults to the <envar>PGPORT</envar> environment variable, if
        set, or a compiled-in default.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-s <replaceable class="parameter">interval</replaceable></option></term>
      <term><option>-&minus;status-interval=<replaceable class="parameter">interval</replaceable></option></term>
      <listitem>
       <para>
        Specifies the number of seconds between status packets sent back to
        the source server. Smaller values allow more accurate monitoring of
        backup progress from the server.
        A value of zero disables periodic status updates completely,
        although an update will still be sent when requested by the server, to
        avoid timeout-based disconnects. The default value is 10 seconds.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-U <replaceable>username</replaceable></option></term>
      <term><option>-&minus;username=<replaceable class="parameter">username</replaceable></option></term>
      <listitem>
       <para>
        Specifies the user name to connect as.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-w</option></term>
      <term><option>-&minus;no-password</option></term>
      <listitem>
       <para>
        Prevents issuing a password prompt.  If the server requires
        password authentication and a password is not available by
        other means such as a <filename>.pgpass</filename> file, the
        connection attempt will fail.  This option can be useful in
        batch jobs and scripts where no user is present to enter a
        password.
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-W</option></term>
      <term><option>-&minus;password</option></term>
      <listitem>
       <para>
        Forces <application>pg_basebackup</application> to prompt for a
        password before connecting to the source server.
       </para>

       <para>
        This option is never essential, since
        <application>pg_basebackup</application> will automatically prompt
        for a password if the server demands password authentication.
        However, <application>pg_basebackup</application> will waste a
        connection attempt finding out that the server wants a password.
        In some cases it is worth typing <option>-W</option> to avoid the extra
        connection attempt.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </para>
________________________________________________________-->
   <para>
    以下命令行选项控制到源服务器的连接：

    <variablelist>
     <varlistentry>
      <term><option>-d <replaceable class="parameter">connstr</replaceable></option></term>
      <term><option>--dbname=<replaceable class="parameter">connstr</replaceable></option></term>
      <listitem>
       <para>
        指定用于连接到服务器的参数，比如<link linkend="libpq-connstring">连接字符串</link>；这些将覆盖所有冲突的命令行选项。
       </para>
       <para>
        为了和其他客户端应用一致，该选项被称为<literal>--dbname</literal>。但是因为<application>pg_basebackup</application>并不连接到集簇中的任何特定数据库，连接字符串中的任何数据库名将被忽略。
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-h <replaceable class="parameter">host</replaceable></option></term>
      <term><option>--host=<replaceable class="parameter">host</replaceable></option></term>
      <listitem>
       <para>
        指定运行服务器的机器的主机名。如果该值以一个斜线开始，它被用作 Unix 域套接字的目录。默认值取自<envar>PGHOST</envar>环境变量（如果设置），否则会尝试一个 Unix 域套接字连接。
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-p <replaceable class="parameter">port</replaceable></option></term>
      <term><option>--port=<replaceable class="parameter">port</replaceable></option></term>
      <listitem>
       <para>
        指定服务器正在监听连接的 TCP 端口或本地 Unix 域套接字文件扩展。默认用<envar>PGPORT</envar>环境变量中的值（如果设置），或者一个编译在程序中的默认值。
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-s <replaceable class="parameter">interval</replaceable></option></term>
      <term><option>--status-interval=<replaceable class="parameter">interval</replaceable></option></term>
      <listitem>
       <para>
        指定发送回源服务器的状态包之间的秒数。较小的值可以更准确地监视服务器的备份进度。一个零值完全禁用这种周期性的状态更新，不过当服务器需要时还是会有一个更新会被发送来避免超时导致的断开连接。默认值是 10 秒。
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-U <replaceable>username</replaceable></option></term>
      <term><option>--username=<replaceable class="parameter">username</replaceable></option></term>
      <listitem>
       <para>
        指定连接的用户名。
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-w</option></term>
      <term><option>--no-password</option></term>
      <listitem>
       <para>
        防止发出口令提示。如果服务器要求口令认证并且没有其他方式提供口令（例如一个<filename>.pgpass</filename>文件），那儿连接尝试将失败。这个选项对于批处理任务和脚本有用，因为在其中没有一个用户来输入口令。
       </para>
      </listitem>
     </varlistentry>

     <varlistentry>
      <term><option>-W</option></term>
      <term><option>--password</option></term>
      <listitem>
       <para>
        强制<application>pg_basebackup</application>在连接到源服务器之前提示要求一个口令。
       </para>

       <para>
        这个选项不是必不可少的，因为如果服务器要求口令认证，<application>pg_basebackup</application>将自动提示要求一个口令。但是，<application>pg_basebackup</application>将浪费一次连接尝试来发现服务器想要一个口令。在某些情况下值得用<option>-W</option>来避免额外的连接尝试。
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </para>
<!-- pgdoc-cn_end sig_en=b988e82b9900ccabe5031d740fa0b946 -->

<!-- pgdoc-cn_start sig_en=49fe1bec18e7896867a6224a744dd27c sig_cn_org=None source=14.1 
   <para>
    Other options are also available:

    <variablelist>
     <varlistentry>
       <term><option>-V</option></term>
       <term><option>-&minus;version</option></term>
       <listitem>
       <para>
       Prints the <application>pg_basebackup</application> version and exits.
       </para>
       </listitem>
     </varlistentry>

     <varlistentry>
       <term><option>-?</option></term>
       <term><option>-&minus;help</option></term>
       <listitem>
       <para>
       Shows help about <application>pg_basebackup</application> command line
       arguments, and exits.
       </para>
       </listitem>
     </varlistentry>

    </variablelist>
   </para>
________________________________________________________-->
   <para>
    其他选项也可用：

    <variablelist>
     <varlistentry>
       <term><option>-V</option></term>
       <term><option>--version</option></term>
       <listitem>
       <para>
       打印<application>pg_basebackup</application>版本并退出。
       </para>
       </listitem>
     </varlistentry>

     <varlistentry>
       <term><option>-?</option></term>
       <term><option>--help</option></term>
       <listitem>
       <para>
       显示有关<application>pg_basebackup</application>命令行参数的帮助并退出。
       </para>
       </listitem>
     </varlistentry>

    </variablelist>
   </para>
<!-- pgdoc-cn_end sig_en=49fe1bec18e7896867a6224a744dd27c -->

 </refsect1>

 <refsect1>
<!-- pgdoc-cn_start sig_en=3b1cdb4e9f7c411322dc1c76ca7f31f3 sig_cn_org=None source=14.1 
  <title>Environment</title>
________________________________________________________-->
  <title>环境</title>
<!-- pgdoc-cn_end sig_en=3b1cdb4e9f7c411322dc1c76ca7f31f3 -->

<!-- pgdoc-cn_start sig_en=df87a49e7afda6b9e5b4e0213a1ba7c3 sig_cn_org=None source=14.1 
  <para>
   This utility, like most other <productname>PostgreSQL</productname> utilities,
   uses the environment variables supported by <application>libpq</application>
   (see <xref linkend="libpq-envars"/>).
  </para>
________________________________________________________-->
  <para>
   和大部分其他<productname>PostgreSQL</productname>工具相似，这个工具也使用<application>libpq</application>（见<xref linkend="libpq-envars"/>）支持的环境变量。
  </para>
<!-- pgdoc-cn_end sig_en=df87a49e7afda6b9e5b4e0213a1ba7c3 -->

<!-- pgdoc-cn_start sig_en=72e83e1224b576d8f1aff7fc7c381f83 sig_cn_org=None source=14.1 
  <para>
   The environment variable <envar>PG_COLOR</envar> specifies whether to use
   color in diagnostic messages. Possible values are
   <literal>always</literal>, <literal>auto</literal> and
   <literal>never</literal>.
  </para>
________________________________________________________-->
  <para>
   环境变量<envar>PG_COLOR</envar>规定在诊断消息中是否使用颜色。可能的值为<literal>always</literal>、<literal>auto</literal>、<literal>never</literal>。
  </para>
<!-- pgdoc-cn_end sig_en=72e83e1224b576d8f1aff7fc7c381f83 -->
 </refsect1>

 <refsect1>
<!-- pgdoc-cn_start sig_en=c44fa43baeb4f69a8a2aa1ea108c6e97 sig_cn_org=None source=14.1 
  <title>Notes</title>
________________________________________________________-->
  <title>注解</title>
<!-- pgdoc-cn_end sig_en=c44fa43baeb4f69a8a2aa1ea108c6e97 -->

<!-- pgdoc-cn_start sig_en=adc8c0aa03fa1ed26be7c5b33c071e22 sig_cn_org=None source=14.1 
  <para>
   At the beginning of the backup, a checkpoint needs to be performed on the
   source server.  This can take some time (especially if the option
   <literal>-&minus;checkpoint=fast</literal> is not used), during
   which <application>pg_basebackup</application> will appear to be idle.
  </para>
________________________________________________________-->
  <para>
   在备份的开始时，需要在源服务器上执行检查点。这可能需要一点时间（尤其在没有使用选项<literal>--checkpoint=fast</literal>时），在此期间<application>pg_basebackup</application>看起来处于闲置状态。
  </para>
<!-- pgdoc-cn_end sig_en=adc8c0aa03fa1ed26be7c5b33c071e22 -->

<!-- pgdoc-cn_start sig_en=fbdd5b814fe8742f16da06648a00daa3 sig_cn_org=097b938cda71f92db521825e65cecc20 source=15.7 
  <para>
   The backup will include all files in the data directory and tablespaces,
   including the configuration files and any additional files placed in the
   directory by third parties, except certain temporary files managed by
   PostgreSQL and operating system files.  But only regular files and
   directories are copied, except that
   symbolic links used for tablespaces are preserved.  Symbolic links pointing
   to certain directories known to PostgreSQL are copied as empty directories.
   Other symbolic links and special device files are skipped.
   See <xref linkend="protocol-replication"/> for the precise details.
  </para>
________________________________________________________-->
  <para>
   备份将包括数据目录和表空间中的所有文件，包括配置文件和由第三方放置在目录中的任何其他文件，但不包括由PostgreSQL和操作系统管理的某些临时文件和操作系统文件。但只有常规文件和目录会被复制，除非用于表空间的符号链接会被保留。指向PostgreSQL已知目录的符号链接会被复制为空目录。其他符号链接和特殊设备文件会被跳过。有关详细信息，请参见<xref linkend="protocol-replication"/>。
</para>
<!-- pgdoc-cn_end sig_en=fbdd5b814fe8742f16da06648a00daa3 -->

<!-- pgdoc-cn_start sig_en=898276169a455d4ad481d0aac1fb2cb5 sig_cn_org=None source=14.1 
  <para>
   In plain format, tablespaces will be backed up to the same path
   they have on the source server, unless the
   option <literal>-&minus;tablespace-mapping</literal> is used.  Without
   this option, running a plain format base backup on the same host as the
   server will not work if tablespaces are in use, because the backup would
   have to be written to the same directory locations as the original
   tablespaces.
  </para>
________________________________________________________-->
  <para>
   在普通格式中，表空间将备份到源服务器上的相同路径，除非使用了<literal>--tablespace-mapping</literal>选项。如果没有这个选项并且表空间正在使用，在同一台服务器上进行普通格式的基础备份将无法工作，因为备份必须要写入到与原始表空间相同的目录位置。
  </para>
<!-- pgdoc-cn_end sig_en=898276169a455d4ad481d0aac1fb2cb5 -->

<!-- pgdoc-cn_start sig_en=71124e7e3f22467aae64784eb2328ae6 sig_cn_org=None source=14.1 
  <para>
   When tar format is used, it is the user's responsibility to unpack each
   tar file before starting a PostgreSQL server that uses the data. If there
   are additional tablespaces, the
   tar files for them need to be unpacked in the correct locations. In this
   case the symbolic links for those tablespaces will be created by the server
   according to the contents of the <filename>tablespace_map</filename> file that is
   included in the <filename>base.tar</filename> file.
  </para>
________________________________________________________-->
  <para>
   在使用 tar 格式时，用户应负责在启动使用数据的 PostgreSQL 服务器前解压每一个 tar 文件。如果有额外的表空间，用于它们的 tar 文件需要被解压到正确的位置。在这种情况下，服务器将根据包含在<filename>base.tar</filename>文件中的<filename>tablespace_map</filename>文件的内容为那些表空间创建符号链接。
  </para>
<!-- pgdoc-cn_end sig_en=71124e7e3f22467aae64784eb2328ae6 -->

<!-- pgdoc-cn_start sig_en=08dfda9cd275934d50a0e8a747cb9e57 sig_cn_org=None source=14.1 
  <para>
   <application>pg_basebackup</application> works with servers of the same
   or an older major version, down to 9.1. However, WAL streaming mode (<literal>-X
   stream</literal>) only works with server version 9.3 and later, and tar format
   (<literal>-&minus;format=tar</literal>) only works with server version 9.5
   and later.
  </para>
________________________________________________________-->
  <para>
   <application>pg_basebackup</application>可以和具有相同或较低主版本的服务器一起工作，最低是 9.1。但是，WAL 流模式（<literal>-X 流</literal>）只能和版本为 9.3 及以上版本的服务器一起工作。tar 格式（<literal>--format=tar</literal>）只能用于版本 9.5 及以上的服务器。
  </para>
<!-- pgdoc-cn_end sig_en=08dfda9cd275934d50a0e8a747cb9e57 -->

<!-- pgdoc-cn_start sig_en=4c89b7bb95478ceb555d2a9dda5c0cab sig_cn_org=None source=14.1 
  <para>
   <application>pg_basebackup</application> will preserve group permissions
   for data files if group permissions are enabled on the source cluster.
  </para>
________________________________________________________-->
  <para>
   如果在源集簇上启用了组权限，<application>pg_basebackup</application>将保留数据文件的组权限。
  </para>
<!-- pgdoc-cn_end sig_en=4c89b7bb95478ceb555d2a9dda5c0cab -->

 </refsect1>

 <refsect1>
<!-- pgdoc-cn_start sig_en=8f24ed0a9e4d47ffa2be9a1f3e09fa6d sig_cn_org=None source=14.1 
  <title>Examples</title>
________________________________________________________-->
  <title>例子</title>
<!-- pgdoc-cn_end sig_en=8f24ed0a9e4d47ffa2be9a1f3e09fa6d -->

<!-- pgdoc-cn_start sig_en=d6f04804d71b002282586e4215fedcbe sig_cn_org=None source=14.1 
  <para>
   To create a base backup of the server at <literal>mydbserver</literal>
   and store it in the local directory
   <filename>/usr/local/pgsql/data</filename>:
<screen>
<prompt>$</prompt> <userinput>pg_basebackup -h mydbserver -D /usr/local/pgsql/data</userinput>
</screen>
  </para>
________________________________________________________-->
  <para>
   要创建服务器<literal>mydbserver</literal>的一个基础备份并将它存储在本地目录<filename>/usr/local/pgsql/data</filename>中：
<screen>
<prompt>$</prompt> <userinput>pg_basebackup -h mydbserver -D /usr/local/pgsql/data</userinput>
</screen>
  </para>
<!-- pgdoc-cn_end sig_en=d6f04804d71b002282586e4215fedcbe -->

<!-- pgdoc-cn_start sig_en=91de513e7cb049128018d3e984ffbf7e sig_cn_org=None source=14.1 
  <para>
   To create a backup of the local server with one compressed
   tar file for each tablespace, and store it in the directory
   <filename>backup</filename>, showing a progress report while running:
<screen>
<prompt>$</prompt> <userinput>pg_basebackup -D backup -Ft -z -P</userinput>
</screen>
  </para>
________________________________________________________-->
  <para>
   要创建本地服务器的一个备份，为其中每一个表空间产生一个压缩过的 tar 文件，并且将它存储在目录<filename>backup</filename>中，在运行期间显示一个进度报告：
<screen>
<prompt>$</prompt> <userinput>pg_basebackup -D backup -Ft -z -P</userinput>
</screen>
  </para>
<!-- pgdoc-cn_end sig_en=91de513e7cb049128018d3e984ffbf7e -->

<!-- pgdoc-cn_start sig_en=3c6c9884663e9924d19dbdcc16e13815 sig_cn_org=None source=14.1 
  <para>
   To create a backup of a single-tablespace local database and compress
   this with <productname>bzip2</productname>:
<screen>
<prompt>$</prompt> <userinput>pg_basebackup -D - -Ft -X fetch | bzip2 &gt; backup.tar.bz2</userinput>
</screen>
   (This command will fail if there are multiple tablespaces in the
   database.)
  </para>
________________________________________________________-->
  <para>
   要创建一个单一表空间本地数据库的备份并且使用<productname>bzip2</productname>压缩它：
<screen>
<prompt>$</prompt> <userinput>pg_basebackup -D - -Ft -X fetch | bzip2 &gt; backup.tar.bz2</userinput>
</screen>
   （如果在该数据库中有多个表空间，这个命令将失败）。
  </para>
<!-- pgdoc-cn_end sig_en=3c6c9884663e9924d19dbdcc16e13815 -->

<!-- pgdoc-cn_start sig_en=3d81b5b61659b2203ac049cf3bcc2093 sig_cn_org=None source=14.1 
  <para>
   To create a backup of a local database where the tablespace in
   <filename>/opt/ts</filename> is relocated
   to <filename>./backup/ts</filename>:
<screen>
<prompt>$</prompt> <userinput>pg_basebackup -D backup/data -T /opt/ts=$(pwd)/backup/ts</userinput>
</screen></para>
________________________________________________________-->
  <para>
   要创建一个本地数据库的备份，其中<filename>/opt/ts</filename>中的表空间被重定位到<filename>./backup/ts</filename>：
<screen>
<prompt>$</prompt> <userinput>pg_basebackup -D backup/data -T /opt/ts=$(pwd)/backup/ts</userinput>
</screen></para>
<!-- pgdoc-cn_end sig_en=3d81b5b61659b2203ac049cf3bcc2093 -->

<!-- pgdoc-cn_start sig_en=da0ccceca3da1c94bc802722be43686f sig_cn_org=5f604a40cbaa73e748c8c78140adfb68 source=15.7 
  <para>
   To create a backup of a local server with one tar file for each tablespace
   compressed with <application>gzip</application> at level 9, stored in the
   directory <filename>backup</filename>:
<screen>
<prompt>$</prompt> <userinput>pg_basebackup -D backup -Ft -&minus;compress=gzip:9</userinput>
</screen></para>
________________________________________________________-->
  <para>
   要创建一个本地服务器的备份，每个表空间一个tar文件，使用<application>gzip</application>在9级压缩，
   存储在目录<filename>backup</filename>中：
<screen>
<prompt>$</prompt> <userinput>pg_basebackup -D backup -Ft --compress=gzip:9</userinput>
</screen>
</para>
<!-- pgdoc-cn_end sig_en=da0ccceca3da1c94bc802722be43686f -->

 </refsect1>

 <refsect1>
<!-- pgdoc-cn_start sig_en=8b7cc214676b443e6527e3d6bf054420 sig_cn_org=None source=14.1 
  <title>See Also</title>
________________________________________________________-->
  <title>参见</title>
<!-- pgdoc-cn_end sig_en=8b7cc214676b443e6527e3d6bf054420 -->

  <simplelist type="inline">
   <member><xref linkend="app-pgdump"/></member>
   <member><xref linkend="basebackup-progress-reporting"/></member>
  </simplelist>
 </refsect1>

</refentry>
